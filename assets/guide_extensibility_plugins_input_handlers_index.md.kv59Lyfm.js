import{_ as p,C as o,c as t,o as r,a2 as l,j as n,a,G as c}from"./chunks/framework.CwCSXIY0.js";const i="/assets/arithmetic.DuzS3C8C.png",F="/assets/simple_input_handler.USutu1Hb.mp4",y="/assets/simple_input_handler_preview.CzNroCfe.mp4",D="/assets/list_input_handler.IXBjmyXW.mp4",d="/assets/multiply_input.BOE7VoZF.mp4",u="/assets/multiply_next_input.By0qbkXv.mp4",E=JSON.parse('{"title":"Input Handlers","description":"","frontmatter":{"title":"Input Handlers"},"headers":[],"relativePath":"guide/extensibility/plugins/input_handlers/index.md","filePath":"guide/extensibility/plugins/input_handlers/index.md","lastUpdated":1738694335000}'),m={name:"guide/extensibility/plugins/input_handlers/index.md"},b={class:"tip custom-block"};function h(f,s,A,g,B,v){const e=o("Key");return r(),t("div",null,[s[9]||(s[9]=l('<h1 id="input-handlers" tabindex="-1">Input Handlers <a class="header-anchor" href="#input-handlers" aria-label="Permalink to &quot;Input Handlers&quot;">​</a></h1><p><img src="'+i+`" alt="Arithmetic command using an input handler"></p><p>Input handlers are a mechanism to query a user for one or multiple input parameters via the Command Palette. They replace the older method of input and quick panels (<code>Window.show_input_panel</code> and <code>Window.show_quick_panel</code>) for a unified user experience in a single component.</p><p>Input Handlers have been added in build 3154 and were first available on the stable channel in version 3.1.</p><h2 id="examples" tabindex="-1">Examples <a class="header-anchor" href="#examples" aria-label="Permalink to &quot;Examples&quot;">​</a></h2><p>The following commands provided by Sublime Text&#39;s <code>Default</code> package use input handlers (command names are for the Command Palette):</p><table tabindex="0"><thead><tr><th style="text-align:left;">Command name</th><th style="text-align:left;">File</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;"><em>Arithmetic</em></td><td style="text-align:left;"><code>Default/arithmetic.py</code></td><td style="text-align:left;">Evaluates a given Python expression (usually numeric).</td></tr><tr><td style="text-align:left;"><em>View Package File</em></td><td style="text-align:left;"><code>Default/ui.py</code></td><td style="text-align:left;">Provides a list of all resource files inside the Packages folder to open.</td></tr><tr><td style="text-align:left;"><em>Rename File</em></td><td style="text-align:left;"><code>Default/rename.py</code></td><td style="text-align:left;">Queries the user for a new file name for the active view.</td></tr></tbody></table><p>You can use the above <em>View Package File</em> command to view the source code of these files.</p><h2 id="input-handler-kinds" tabindex="-1">Input Handler Kinds <a class="header-anchor" href="#input-handler-kinds" aria-label="Permalink to &quot;Input Handler Kinds&quot;">​</a></h2><p>There are currently two types of input handlers:</p><ol><li>text input handlers accepting arbitrary text input,</li><li>list input handlers providing a list of options for the user to choose from.</li></ol><p>Text input handlers always forward the entered text to the command, while list input handlers can handle any JSON-serializable value, accompanied by a caption for their respective list entry.</p><h2 id="implementing-an-input-handler" tabindex="-1">Implementing an Input Handler <a class="header-anchor" href="#implementing-an-input-handler" aria-label="Permalink to &quot;Implementing an Input Handler&quot;">​</a></h2><p>Because input handlers are using a rather generic interface, adding one to your command may require careful thinking and may not be the most intuitive process.</p><p>We will implement an example input handler and explain more gears you can tweak for advanced configuration.</p><div class="warning custom-block"><p class="custom-block-title">Important</p><p>To use an input handler for a command, <strong>the command must have an entry in the <a href="./../../command_palette.html">Command Palette</a></strong>. This is easy to forget, so make sure to remember!</p></div><p>Let&#39;s start with a very simple command that inserts the given text into the view. The following two files can be placed in any package folder, including &quot;User&quot;.</p><p><code>simple_command.py</code>:</p><div class="language-py line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> sublime_plugin</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#FFCB6B;"> SimpleCommand</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">sublime_plugin</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">TextCommand</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#C792EA;">    def</span><span style="color:#82AAFF;"> run</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> edit</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> text</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        for</span><span style="color:#BABED8;"> region </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#BABED8;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">sel</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#BABED8;">            self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">replace</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">edit</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> region</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> text</span><span style="color:#89DDFF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><code>Simple.sublime-commands</code>:</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#89DDFF;">    {</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C792EA;">caption</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Simple Command</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C792EA;">command</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">simple</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> },</span></span>
<span class="line"><span style="color:#89DDFF;">]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="the-command-input-method" tabindex="-1">The <code>*Command.input</code> Method <a class="header-anchor" href="#the-command-input-method" aria-label="Permalink to &quot;The \`*Command.input\` Method&quot;">​</a></h3><p>When implementing a command, it receives keyed arguments to its <code>run</code> method. When a parameter in the signature provides no default value, it can only be called if arguments are provided for all such parameters. Calling a command with too few arguments will fail and cause an exception to be printed to the console.</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span>&gt;&gt;&gt; window.run_command(&quot;simple&quot;)</span></span>
<span class="line"><span>Traceback (most recent call last):</span></span>
<span class="line"><span>  File &quot;/opt/sublime_text/Lib/python38/sublime_plugin.py&quot;, line 1270, in run_</span></span>
<span class="line"><span>    return self.run()</span></span>
<span class="line"><span>TypeError: run() missing 1 required positional argument: &#39;text&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>In a situation like this, a command may implement <a href="https://www.sublimetext.com/docs/api_reference.html#sublime_plugin.TextCommand" target="_blank" rel="noreferrer">the <code>input</code> method</a> and return an input handler instance that provides Sublime Text with the necessary information to display an input handler.</p><div class="language-py line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> sublime_plugin</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#FFCB6B;"> SimpleCommand</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">sublime_plugin</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">TextCommand</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#C792EA;">    def</span><span style="color:#82AAFF;"> run</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> edit</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> text</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        for</span><span style="color:#BABED8;"> region </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#BABED8;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">sel</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#BABED8;">            self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">replace</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">edit</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> region</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> text</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="color:#C792EA;">    def</span><span style="color:#82AAFF;"> input</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> args</span><span style="color:#89DDFF;">):</span></span>
<span class="line highlighted"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#82AAFF;"> MyTextInputHandler</span><span style="color:#89DDFF;">()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>The <code>input</code> function takes an <code>args</code> parameter that is a dict of all currently known arguments to the command. Since we know that our only required argument (<code>text</code>) is missing at this point, we won&#39;t use the parameter.</p><p>We haven&#39;t defined <code>MyTextInputHandler</code> yet, so let&#39;s do that.</p><h3 id="subclassing-textinputhandler" tabindex="-1">Subclassing <code>TextInputHandler</code> <a class="header-anchor" href="#subclassing-textinputhandler" aria-label="Permalink to &quot;Subclassing \`TextInputHandler\`&quot;">​</a></h3><p>To create a simple input handler for text, we create a subclass of <a href="https://www.sublimetext.com/docs/api_reference.html#sublime_plugin.TextInputHandler" target="_blank" rel="noreferrer"><code>sublime_plugin.TextInputHandler</code></a>. In our subclass, we can override specific methods. For the most basic functionality, we need <code>name</code>. Additionally, for convenience, we define <code>placeholder</code>.</p><div class="language-py line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#FFCB6B;"> MyTextInputHandler</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">sublime_plugin</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">TextInputHandler</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#C792EA;">    def</span><span style="color:#82AAFF;"> name</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">text</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">    def</span><span style="color:#82AAFF;"> placeholder</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Text to insert</span><span style="color:#89DDFF;">&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>And that&#39;s it. Here is what it looks like:</p><video controls src="`+F+`"></video><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Of course, you can still call the command like before from a key binding or via the console. When all required arguments are provided, the input handler will be skipped and the command run immediately.</p></div><h3 id="rendering-a-preview" tabindex="-1">Rendering a Preview <a class="header-anchor" href="#rendering-a-preview" aria-label="Permalink to &quot;Rendering a Preview&quot;">​</a></h3><p>The <code>preview</code> method is called for every modification of the entered text and allows to show a small preview below the Command Palette. The preview can either be pure text or can use <a href="https://www.sublimetext.com/docs/minihtml.html" target="_blank" rel="noreferrer">minihtml</a> for a markup-enabled format.</p><p>The following snippet extends our input handler from earlier to show the amount of characters that will be inserted:</p><div class="language-py line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#FFCB6B;"> MyTextInputHandler</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">sublime_plugin</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">TextInputHandler</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#C792EA;">    def</span><span style="color:#82AAFF;"> name</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">text</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">    def</span><span style="color:#82AAFF;"> placeholder</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Text to insert</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="color:#C792EA;">    def</span><span style="color:#82AAFF;"> preview</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> text</span><span style="color:#89DDFF;">):</span></span>
<span class="line highlighted"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Characters: </span><span style="color:#F78C6C;">{}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">format</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">len</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">text</span><span style="color:#89DDFF;">))</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>There are additional methods that can be overriden. These are described <a href="https://www.sublimetext.com/docs/api_reference.html#sublime_plugin.TextInputHandler" target="_blank" rel="noreferrer">in the documentation</a>.</p><h3 id="using-dynamic-data" tabindex="-1">Using Dynamic Data <a class="header-anchor" href="#using-dynamic-data" aria-label="Permalink to &quot;Using Dynamic Data&quot;">​</a></h3><p>You may have noticed that our <code>MyTextInputHandler</code> class is entirely separate from our <code>SampleCommand</code>. In the event that we want the input handler to depend on some dynamic data, such as the current view&#39;s selection, we will have to provide such values to the input handler&#39;s constructor.</p><p>The following snippet passes the text command&#39;s <code>View</code> instance to the input handler&#39;s constructor. The constructor itself stores the instance in an instance attribute and later accesses it from <code>preview</code>.</p><div class="language-py line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> sublime_plugin</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#FFCB6B;"> SimpleCommand</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">sublime_plugin</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">TextCommand</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#C792EA;">    def</span><span style="color:#82AAFF;"> run</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> edit</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> text</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        for</span><span style="color:#BABED8;"> region </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#BABED8;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">sel</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#BABED8;">            self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">replace</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">edit</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> region</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> text</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">    def</span><span style="color:#82AAFF;"> input</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> args</span><span style="color:#89DDFF;">):</span></span>
<span class="line highlighted"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#82AAFF;"> MyTextInputHandler</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#FFCB6B;"> MyTextInputHandler</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">sublime_plugin</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">TextInputHandler</span><span style="color:#89DDFF;">):</span></span>
<span class="line highlighted"><span style="color:#C792EA;">    def</span><span style="color:#82AAFF;"> __init__</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> view</span><span style="color:#89DDFF;">):</span></span>
<span class="line highlighted"><span style="color:#BABED8;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;"> =</span><span style="color:#BABED8;"> view</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">    def</span><span style="color:#82AAFF;"> name</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">text</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">    def</span><span style="color:#82AAFF;"> placeholder</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Text to insert</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">    def</span><span style="color:#82AAFF;"> preview</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> text</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#89DDFF;"> (</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Selections: </span><span style="color:#F78C6C;">{}</span><span style="color:#C3E88D;">, Characters: </span><span style="color:#F78C6C;">{}</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line highlighted"><span style="color:#89DDFF;">                .</span><span style="color:#82AAFF;">format</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">len</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">sel</span><span style="color:#89DDFF;">()),</span><span style="color:#82AAFF;"> len</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">text</span><span style="color:#89DDFF;">)))</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><video controls src="`+y+`"></video><h2 id="providing-a-list-of-options-with-listinputhandler" tabindex="-1">Providing a List Of Options With <code>ListInputHandler</code> <a class="header-anchor" href="#providing-a-list-of-options-with-listinputhandler" aria-label="Permalink to &quot;Providing a List Of Options With \`ListInputHandler\`&quot;">​</a></h2><p>Instead of free form input, you can provide the user with a list of values that they can choose from. This is done by sublassing <code>sublime_plugin.ListInputHandler</code> and providing an <code>list_items</code> method that returns a list of values to choose from. This list can either be a list of strings or a list of tuples, where the first element indicates the text to be shown and the second element the value to insert as the command&#39;s argument.</p><p>Following is a small example command that offers a list of <a href="https://html.spec.whatwg.org/multipage/syntax.html#character-references" target="_blank" rel="noreferrer">named HTML entities</a> using the built-in <a href="https://docs.python.org/3/library/html.entities.html" target="_blank" rel="noreferrer"><code>html.entities</code></a> module:</p><div class="language-py line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#BABED8;"> html</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">entities </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> html5</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> sublime_plugin</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#FFCB6B;"> InsertHtmlEntityCommand</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">sublime_plugin</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">TextCommand</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#C792EA;">    def</span><span style="color:#82AAFF;"> run</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> edit</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> entity</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        for</span><span style="color:#BABED8;"> region </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#BABED8;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">sel</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#BABED8;">            self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">replace</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">edit</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> region</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">&amp;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> +</span><span style="color:#82AAFF;"> entity</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">    def</span><span style="color:#82AAFF;"> input</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> args</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#82AAFF;"> EntityInputHandler</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#FFCB6B;"> EntityInputHandler</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">sublime_plugin</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">ListInputHandler</span><span style="color:#89DDFF;">):</span></span>
<span class="line highlighted"><span style="color:#C792EA;">    def</span><span style="color:#82AAFF;"> list_items</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">):</span></span>
<span class="line highlighted"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#82AAFF;"> sorted</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">html5</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">keys</span><span style="color:#89DDFF;">())</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">    def</span><span style="color:#82AAFF;"> preview</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> value</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Character: </span><span style="color:#F78C6C;">{}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">format</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">html5</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">value</span><span style="color:#89DDFF;">))</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Notice how we don&#39;t implement <code>name</code> here, because Sublime Text can automatically infer the input handler&#39;s target argument name from the class name, using the same logic as for command names but stripping &quot;InputHandler&quot; instead.</p></div><div class="warning custom-block"><p class="custom-block-title">Reminder</p><p>Remember that you need to make the above command available to the Command Palette by specifying it in a <code>.sublime-commands</code> file.</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#89DDFF;">  {</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C792EA;">caption</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Insert Html Entity</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C792EA;">command</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">insert_html_entity</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> },</span></span>
<span class="line"><span style="color:#89DDFF;">]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></div><p>Here is what it looks like in action:</p><video controls src="`+D+`"></video><h2 id="implementing-multiple-input-handlers" tabindex="-1">Implementing Multiple Input Handlers <a class="header-anchor" href="#implementing-multiple-input-handlers" aria-label="Permalink to &quot;Implementing Multiple Input Handlers&quot;">​</a></h2><p>When a command requires multiple arguments that the user must provide, things change a bit. Notably, you know must add logic inside <code>input</code> that returns the appropriate input handler based on which arguments are still missing. The order in which these are returned matters, because input handlers that received input remain visible in the Command Palette to visualize the current input step in a breadcrumbs style. And finally, the input handlers&#39; <code>description</code> methods will be used to render text for these breadcrumbs. (Since the default behavior is to show the inserted value, this is used only rarely.)</p><p>Let&#39;s write a command that multiplies two operands.</p><div class="language-py line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> sublime_plugin</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#FFCB6B;"> SimpleMultiplyCommand</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">sublime_plugin</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">TextCommand</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#C792EA;">    def</span><span style="color:#82AAFF;"> run</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> edit</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> operand1</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> operand2</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#BABED8;">        result </span><span style="color:#89DDFF;">=</span><span style="color:#FFCB6B;"> float</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">operand1</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> *</span><span style="color:#FFCB6B;"> float</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">operand2</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        for</span><span style="color:#BABED8;"> region </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#BABED8;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">sel</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#BABED8;">            self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">replace</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">edit</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> region</span><span style="color:#89DDFF;">,</span><span style="color:#FFCB6B;"> str</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">result</span><span style="color:#89DDFF;">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">    def</span><span style="color:#82AAFF;"> input</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> args</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        for</span><span style="color:#BABED8;"> name </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#89DDFF;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">operand1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">operand2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">            if</span><span style="color:#BABED8;"> name </span><span style="color:#89DDFF;">not</span><span style="color:#89DDFF;"> in</span><span style="color:#BABED8;"> args</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">                return</span><span style="color:#82AAFF;"> NumberInputHandler</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">name</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#FFCB6B;"> NumberInputHandler</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">sublime_plugin</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">TextInputHandler</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#C792EA;">    def</span><span style="color:#82AAFF;"> __init__</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> name</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#BABED8;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">_name</span><span style="color:#89DDFF;"> =</span><span style="color:#BABED8;"> name</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">    def</span><span style="color:#82AAFF;"> name</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#BABED8;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">_name</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">    def</span><span style="color:#82AAFF;"> placeholder</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Number</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">    def</span><span style="color:#82AAFF;"> validate</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> text</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        try</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#FFCB6B;">            float</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">text</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        except</span><span style="color:#FFCB6B;"> ValueError</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">            return</span><span style="color:#89DDFF;"> False</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        else</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">            return</span><span style="color:#89DDFF;"> True</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>In this command, we only used a single input handler class for two parameters by returning an instance variable in the <code>name</code> function.</p></div><video controls src="`+d+`"></video><p>The command works as it advertises. It asks for two numbers when invoked from the command palette consecutively. However, it does not show a breadcrumb for the first operand after we confirmed it. This is because the <code>input</code> command is re-run after the first argument, since we need two arguments, and information about the previous input handler is lost.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Having problems running this command? Did you add a <code>.sublime-commands</code> entry for it?</p></div><h3 id="the-next-input-method" tabindex="-1">The <code>next_input</code> Method <a class="header-anchor" href="#the-next-input-method" aria-label="Permalink to &quot;The \`next_input\` Method&quot;">​</a></h3><p>To show the before-mentioned breadcrumb, the first input handler needs to know what input handler should be the next and return it in a <code>next_input</code> method.</p><p>You could do so in a static way, but let&#39;s try a dynamic approach. Remember that you don&#39;t need to ask for the second argument if it was already provided.</p><div class="language-py line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> sublime_plugin</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#FFCB6B;"> MultiplyCommand</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">sublime_plugin</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">TextCommand</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#C792EA;">    def</span><span style="color:#82AAFF;"> run</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> edit</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> operand1</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> operand2</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#BABED8;">        result </span><span style="color:#89DDFF;">=</span><span style="color:#FFCB6B;"> float</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">operand1</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> *</span><span style="color:#FFCB6B;"> float</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">operand2</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        for</span><span style="color:#BABED8;"> region </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#BABED8;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">sel</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#BABED8;">            self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">replace</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">edit</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> region</span><span style="color:#89DDFF;">,</span><span style="color:#FFCB6B;"> str</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">result</span><span style="color:#89DDFF;">))</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="color:#C792EA;">    def</span><span style="color:#82AAFF;"> input</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> args</span><span style="color:#89DDFF;">):</span></span>
<span class="line highlighted"><span style="color:#BABED8;">        names </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> [</span><span style="color:#BABED8;">name </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#BABED8;"> name </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#89DDFF;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">operand1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">operand2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span></span>
<span class="line highlighted"><span style="color:#89DDFF;font-style:italic;">                 if</span><span style="color:#BABED8;"> name </span><span style="color:#89DDFF;">not</span><span style="color:#89DDFF;"> in</span><span style="color:#BABED8;"> args</span><span style="color:#89DDFF;">]</span></span>
<span class="line highlighted"><span style="color:#89DDFF;font-style:italic;">        if</span><span style="color:#BABED8;"> names</span><span style="color:#89DDFF;">:</span></span>
<span class="line highlighted"><span style="color:#89DDFF;font-style:italic;">            return</span><span style="color:#82AAFF;"> MultiNumberInputHandler</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">names</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#FFCB6B;"> MultiNumberInputHandler</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">sublime_plugin</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">TextInputHandler</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#C792EA;">    def</span><span style="color:#82AAFF;"> __init__</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> names</span><span style="color:#89DDFF;">):</span></span>
<span class="line highlighted"><span style="color:#BABED8;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">_name</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> *</span><span style="color:#BABED8;">self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">next_names</span><span style="color:#89DDFF;"> =</span><span style="color:#BABED8;"> names</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">    def</span><span style="color:#82AAFF;"> name</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#BABED8;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">_name</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">    def</span><span style="color:#82AAFF;"> placeholder</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Number</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="color:#C792EA;">    def</span><span style="color:#82AAFF;"> next_input</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> args</span><span style="color:#89DDFF;">):</span></span>
<span class="line highlighted"><span style="color:#89DDFF;font-style:italic;">        if</span><span style="color:#BABED8;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">next_names</span><span style="color:#89DDFF;">:</span></span>
<span class="line highlighted"><span style="color:#89DDFF;font-style:italic;">            return</span><span style="color:#82AAFF;"> MultiNumberInputHandler</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">next_names</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">    def</span><span style="color:#82AAFF;"> validate</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> text</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        try</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#FFCB6B;">            float</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">text</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        except</span><span style="color:#FFCB6B;"> ValueError</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">            return</span><span style="color:#89DDFF;"> False</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        else</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">            return</span><span style="color:#89DDFF;"> True</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><p>In this command, we collect all the arguments we need from the first call and change <code>NumberInputHandler</code> to <code>MultiNumberInputHandler</code> that accepts a list of argument names to query. The destructuring assignment in line 19 splits the list into a &quot;first&quot; and &quot;rest&quot;, so that the rest of the required arguments can be returned in the <code>next_input</code> method.</p><p>Let&#39;s see how it looks when invoked:</p><video controls src="`+u+'"></video>',67)),n("div",b,[s[8]||(s[8]=n("p",{class:"custom-block-title"},"TIP",-1)),n("p",null,[s[0]||(s[0]=a("Both ")),s[1]||(s[1]=n("code",null,"NumberInputHandler",-1)),s[2]||(s[2]=a(" and ")),s[3]||(s[3]=n("code",null,"MultiNumberInputHandler",-1)),s[4]||(s[4]=a(" implement a ")),s[5]||(s[5]=n("code",null,"validate",-1)),s[6]||(s[6]=a(" method that returns a boolean if the passed text can be parsed into a floating point number. The effect is that for non-numeric text the input is rejected and nothing happens when pressing ")),c(e,{k:"enter"}),s[7]||(s[7]=a(". Try for yourself!"))])]),s[10]||(s[10]=l(`<h2 id="code-archive" tabindex="-1">Code Archive <a class="header-anchor" href="#code-archive" aria-label="Permalink to &quot;Code Archive&quot;">​</a></h2><p>The final code examples presented on this page <a href="https://github.com/sublimetext-io/docs.sublimetext.io/tree/master/docs/guide/extensibility/plugins/input_handlers/code" target="_blank" rel="noreferrer">are included in the source git repository</a>. You can download a [zip][] of it (via <a href="https://github.com/MinhasKamal/DownGit" target="_blank" rel="noreferrer">DownGit</a>) and extract it into your Packages folder to experiment with them.</p><h2 id="invoking-commands-with-input-handlers" tabindex="-1">Invoking Commands With Input Handlers <a class="header-anchor" href="#invoking-commands-with-input-handlers" aria-label="Permalink to &quot;Invoking Commands With Input Handlers&quot;">​</a></h2><p>When invoking a command with an input handler and without all required arguments from a plugin or key binding, it is advised to use the <code>show_overlay</code> command. Commands invoked that way will have their <code>input</code> method called before ST attempts to call <code>run</code>, resulting in more predictable behavior. Otherwise, Sublime Text will try to run the command as normally (running its <code>run</code> method) and only check the command&#39;s <code>input</code> method if the call failed because of insufficient arguments.</p><p><strong>Examples</strong>:</p><div class="language-py line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#BABED8;">view</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">run_command</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#89DDFF;">    &#39;</span><span style="color:#C3E88D;">show_overlay</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    {</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">overlay</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">command_palette</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">command</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">multiply</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">args</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">operand1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;"> 12</span><span style="color:#89DDFF;">}},</span></span>
<span class="line"><span style="color:#89DDFF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C792EA;">command</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">show_overlay</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C792EA;">args</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">        &quot;</span><span style="color:#FFCB6B;">overlay</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">command_palette</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">        &quot;</span><span style="color:#FFCB6B;">command</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">multiply</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">        &quot;</span><span style="color:#FFCB6B;">args</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">operand1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;"> 12</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">    },</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="caveats" tabindex="-1">Caveats <a class="header-anchor" href="#caveats" aria-label="Permalink to &quot;Caveats&quot;">​</a></h2><ul><li><p>As mentioned countless times already, there must be an entry for the Command Palette to be able to use input handlers.</p></li><li><p>A command&#39;s <code>input</code> method may be called multiple times until the user can access it.</p></li><li><p><code>is_visible</code> and <code>is_enabled</code> cannot decide their return value based on the given arguments when an input handler is involved. (<a href="https://github.com/sublimehq/sublime_text/issues/3249" target="_blank" rel="noreferrer">#3249</a>)</p></li></ul>`,9))])}const w=p(m,[["render",h]]);export{E as __pageData,w as default};
