<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Input Handlers | Sublime Text Community Documentation</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="Community-driven Documentation for Sublime Text">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta name="author" content="sublime text community">
    <meta name="keywords" content="sublime text,sublime,documentation">
    <meta name="theme-color" content="#ff6600">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.ad59d8ee.css" as="style"><link rel="preload" href="/assets/js/app.5ae8f9cc.js" as="script"><link rel="preload" href="/assets/js/2.2f4a13d7.js" as="script"><link rel="preload" href="/assets/js/3.0d379e39.js" as="script"><link rel="preload" href="/assets/js/6.c5a0a48d.js" as="script"><link rel="preload" href="/assets/js/19.5f0c50b9.js" as="script"><link rel="prefetch" href="/assets/js/10.12eeda73.js"><link rel="prefetch" href="/assets/js/11.4f118f7c.js"><link rel="prefetch" href="/assets/js/12.da685165.js"><link rel="prefetch" href="/assets/js/13.e3070371.js"><link rel="prefetch" href="/assets/js/14.18c4d541.js"><link rel="prefetch" href="/assets/js/15.725445cc.js"><link rel="prefetch" href="/assets/js/16.431a01ee.js"><link rel="prefetch" href="/assets/js/17.e4840263.js"><link rel="prefetch" href="/assets/js/18.ca7dbb19.js"><link rel="prefetch" href="/assets/js/20.50f930ff.js"><link rel="prefetch" href="/assets/js/21.b28eb5af.js"><link rel="prefetch" href="/assets/js/22.0c90745d.js"><link rel="prefetch" href="/assets/js/23.c3cdf1f0.js"><link rel="prefetch" href="/assets/js/24.e9b74abc.js"><link rel="prefetch" href="/assets/js/25.8dcdd2a3.js"><link rel="prefetch" href="/assets/js/26.3d669bb1.js"><link rel="prefetch" href="/assets/js/27.05fe9c76.js"><link rel="prefetch" href="/assets/js/28.9bdffa75.js"><link rel="prefetch" href="/assets/js/29.29991c9e.js"><link rel="prefetch" href="/assets/js/30.16ee6dd3.js"><link rel="prefetch" href="/assets/js/31.4d1d31bb.js"><link rel="prefetch" href="/assets/js/32.b091deed.js"><link rel="prefetch" href="/assets/js/33.d277e460.js"><link rel="prefetch" href="/assets/js/34.4819c8cd.js"><link rel="prefetch" href="/assets/js/35.bd4cbb57.js"><link rel="prefetch" href="/assets/js/36.8f9f6ec2.js"><link rel="prefetch" href="/assets/js/37.d491fd99.js"><link rel="prefetch" href="/assets/js/38.d2442961.js"><link rel="prefetch" href="/assets/js/39.dc018de2.js"><link rel="prefetch" href="/assets/js/4.fc870416.js"><link rel="prefetch" href="/assets/js/40.dc49cfb5.js"><link rel="prefetch" href="/assets/js/41.40344e19.js"><link rel="prefetch" href="/assets/js/42.179f1fd6.js"><link rel="prefetch" href="/assets/js/43.98c1ac61.js"><link rel="prefetch" href="/assets/js/44.a126942b.js"><link rel="prefetch" href="/assets/js/45.72dad8a3.js"><link rel="prefetch" href="/assets/js/46.adcfc4b6.js"><link rel="prefetch" href="/assets/js/47.cd83a222.js"><link rel="prefetch" href="/assets/js/48.525d28b9.js"><link rel="prefetch" href="/assets/js/49.0fcdf9e6.js"><link rel="prefetch" href="/assets/js/5.2ae1cb72.js"><link rel="prefetch" href="/assets/js/50.cc8a8eb0.js"><link rel="prefetch" href="/assets/js/51.721b7ab8.js"><link rel="prefetch" href="/assets/js/52.7dbe8719.js"><link rel="prefetch" href="/assets/js/53.53f2995c.js"><link rel="prefetch" href="/assets/js/54.744e6add.js"><link rel="prefetch" href="/assets/js/55.5e280bd3.js"><link rel="prefetch" href="/assets/js/56.0d2ba15b.js"><link rel="prefetch" href="/assets/js/7.48445245.js"><link rel="prefetch" href="/assets/js/8.10b3feec.js"><link rel="prefetch" href="/assets/js/9.92586be7.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ad59d8ee.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Sublime Text Community Documentation</span></a> <div class="links"><!----> <div class="user-settings"><a href="#" class="settings-button"><svg aria-hidden="true" data-prefix="fas" data-icon="cog" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-cog fa-w-16 settings-icon"><path fill="currentColor" d="M444.788 291.1l42.616 24.599c4.867 2.809 7.126 8.618 5.459 13.985-11.07 35.642-29.97 67.842-54.689 94.586a12.016 12.016 0 0 1-14.832 2.254l-42.584-24.595a191.577 191.577 0 0 1-60.759 35.13v49.182a12.01 12.01 0 0 1-9.377 11.718c-34.956 7.85-72.499 8.256-109.219.007-5.49-1.233-9.403-6.096-9.403-11.723v-49.184a191.555 191.555 0 0 1-60.759-35.13l-42.584 24.595a12.016 12.016 0 0 1-14.832-2.254c-24.718-26.744-43.619-58.944-54.689-94.586-1.667-5.366.592-11.175 5.459-13.985L67.212 291.1a193.48 193.48 0 0 1 0-70.199l-42.616-24.599c-4.867-2.809-7.126-8.618-5.459-13.985 11.07-35.642 29.97-67.842 54.689-94.586a12.016 12.016 0 0 1 14.832-2.254l42.584 24.595a191.577 191.577 0 0 1 60.759-35.13V25.759a12.01 12.01 0 0 1 9.377-11.718c34.956-7.85 72.499-8.256 109.219-.007 5.49 1.233 9.403 6.096 9.403 11.723v49.184a191.555 191.555 0 0 1 60.759 35.13l42.584-24.595a12.016 12.016 0 0 1 14.832 2.254c24.718 26.744 43.619 58.944 54.689 94.586 1.667 5.366-.592 11.175-5.459 13.985L444.788 220.9a193.485 193.485 0 0 1 0 70.2zM336 256c0-44.112-35.888-80-80-80s-80 35.888-80 80 35.888 80 80 80 80-35.888 80-80z"></path></svg></a> <div class="user-settings-menu" style="display:none;"><div class="theme-options"><!----> <!----> <div class="dark-theme-options toggle-option"><label for="dark-theme-toggle">Enable Dark Theme?</label> <input id="dark-theme-toggle" type="checkbox"></div> <!----> <!----></div></div></div> <!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/reference/" class="nav-link">
  Reference
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Other" class="dropdown-title"><span class="title">Other</span> <span class="arrow down"></span></button> <button type="button" aria-label="Other" class="mobile-dropdown-title"><span class="title">Other</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/GLOSSARY.html" class="nav-link">
  Glossary
</a></li><li class="dropdown-item"><!----> <a href="/other/question.html" class="nav-link">
  F.A.Q
</a></li><li class="dropdown-item"><!----> <a href="https://www.sublimetext.com/docs/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Offical Docs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/sublimetext-io/docs.sublimetext.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/reference/" class="nav-link">
  Reference
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Other" class="dropdown-title"><span class="title">Other</span> <span class="arrow down"></span></button> <button type="button" aria-label="Other" class="mobile-dropdown-title"><span class="title">Other</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/GLOSSARY.html" class="nav-link">
  Glossary
</a></li><li class="dropdown-item"><!----> <a href="/other/question.html" class="nav-link">
  F.A.Q
</a></li><li class="dropdown-item"><!----> <a href="https://www.sublimetext.com/docs/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Offical Docs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/sublimetext-io/docs.sublimetext.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/guide/" aria-current="page" class="sidebar-link">Introduction</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Getting Started</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/getting-started/installation.html" class="sidebar-link">Installation</a></li><li><a href="/guide/getting-started/basic-concepts.html" class="sidebar-link">Basic Concepts</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Basic Usage</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/usage/editing.html" class="sidebar-link">Editing</a></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/guide/usage/file-management/" class="sidebar-heading clickable"><span>File Management &amp; Navigation</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/usage/file-management/projects.html" class="sidebar-link">Projects</a></li><li><a href="/guide/usage/file-management/navigation.html" class="sidebar-link">Navigation</a></li></ul></section></li><li><a href="/guide/usage/search-and-replace.html" class="sidebar-link">Search and Replace</a></li><li><a href="/guide/usage/build-systems.html" class="sidebar-link">Build Systems</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/guide/customization/" class="sidebar-heading clickable"><span>Customization</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/customization/" class="sidebar-link">Overview</a></li><li><a href="/guide/customization/settings.html" class="sidebar-link">Settings</a></li><li><a href="/guide/customization/key_bindings.html" class="sidebar-link">Key Bindings</a></li><li><a href="/guide/customization/menus.html" class="sidebar-link">Menus</a></li><li><a href="/guide/customization/color_schemes.html" class="sidebar-link">Color Schemes</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/guide/extensibility/" class="sidebar-heading clickable router-link-active open"><span>Extensibility &amp; Automation</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/extensibility/" aria-current="page" class="sidebar-link">Extending Sublime Text</a></li><li><a href="/guide/extensibility/command_palette.html" class="sidebar-link">Command Palette</a></li><li><a href="/guide/extensibility/commands.html" class="sidebar-link">Commands</a></li><li><a href="/guide/extensibility/completions.html" class="sidebar-link">Completions</a></li><li><a href="/guide/extensibility/macros.html" class="sidebar-link">Macros</a></li><li><a href="/guide/extensibility/packages.html" class="sidebar-link">Packages</a></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/guide/extensibility/plugins/" class="sidebar-heading clickable router-link-active open"><span>Plugins</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/extensibility/plugins/input_handlers.html" aria-current="page" class="active sidebar-link">Input Handlers</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/extensibility/plugins/input_handlers.html#examples" class="sidebar-link">Examples</a></li><li class="sidebar-sub-header"><a href="/guide/extensibility/plugins/input_handlers.html#input-handler-kinds" class="sidebar-link">Input Handler Kinds</a></li><li class="sidebar-sub-header"><a href="/guide/extensibility/plugins/input_handlers.html#implementing-an-input-handler" class="sidebar-link">Implementing an Input Handler</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/extensibility/plugins/input_handlers.html#the-command-input-method" class="sidebar-link">The *Command.input Method</a></li><li class="sidebar-sub-header"><a href="/guide/extensibility/plugins/input_handlers.html#subclassing-textinputhandler" class="sidebar-link">Subclassing TextInputHandler</a></li><li class="sidebar-sub-header"><a href="/guide/extensibility/plugins/input_handlers.html#rendering-a-preview" class="sidebar-link">Rendering a Preview</a></li><li class="sidebar-sub-header"><a href="/guide/extensibility/plugins/input_handlers.html#using-dynamic-data" class="sidebar-link">Using Dynamic Data</a></li></ul></li><li class="sidebar-sub-header"><a href="/guide/extensibility/plugins/input_handlers.html#providing-a-list-of-options-with-listinputhandler" class="sidebar-link">Providing a List Of Options With ListInputHandler</a></li><li class="sidebar-sub-header"><a href="/guide/extensibility/plugins/input_handlers.html#implementing-multiple-input-handlers" class="sidebar-link">Implementing Multiple Input Handlers</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/extensibility/plugins/input_handlers.html#the-next-input-method" class="sidebar-link">The next_input Method</a></li></ul></li><li class="sidebar-sub-header"><a href="/guide/extensibility/plugins/input_handlers.html#code-archive" class="sidebar-link">Code Archive</a></li><li class="sidebar-sub-header"><a href="/guide/extensibility/plugins/input_handlers.html#invoking-commands-with-input-handlers" class="sidebar-link">Invoking Commands With Input Handlers</a></li><li class="sidebar-sub-header"><a href="/guide/extensibility/plugins/input_handlers.html#caveats" class="sidebar-link">Caveats</a></li></ul></li></ul></section></li><li><a href="/guide/extensibility/snippets.html" class="sidebar-link">Snippets</a></li><li><a href="/guide/extensibility/syntaxdefs.html" class="sidebar-link">Syntax Definitions</a></li></ul></section></li></ul> </aside> <main class="page"><div class="page-title" style="display:;"><h1>Input Handlers</h1> <hr></div>  <div class="theme-default-content content__default"><p><img src="/assets/img/arithmetic.741936d2.png" alt="Arithmetic command using an input handler"></p> <p>Input handlers are a mechanism
to query a user for one or multiple input parameters
via the Command Palette.
They replace the older method of input and quick panels
(<code>Window.show_input_panel</code> and <code>Window.show_quick_panel</code>)
for a unified user experience in a single component.</p> <p>Input Handlers have been added in build 3154
and were first available on the stable channel in version 3.1.</p> <h2 id="examples"><a href="#examples" class="header-anchor">#</a> Examples</h2> <p>The following commands provided by Sublime Text's <code>Default</code> package
use input handlers
(command names are for the Command Palette):</p> <table><thead><tr><th style="text-align:left;">Command name</th> <th style="text-align:left;">File</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:left;"><em>Arithmetic</em></td> <td style="text-align:left;"><code>Default/arithmetic.py</code></td> <td style="text-align:left;">Evaluates a given Python expression (usually numeric).</td></tr> <tr><td style="text-align:left;"><em>View Package File</em></td> <td style="text-align:left;"><code>Default/ui.py</code></td> <td style="text-align:left;">Provides a list of all resource files inside the Packages folder to open.</td></tr> <tr><td style="text-align:left;"><em>Rename File</em></td> <td style="text-align:left;"><code>Default/rename.py</code></td> <td style="text-align:left;">Queries the user for a new file name for the active view.</td></tr></tbody></table> <p>You can use the above <em>View Package File</em> command
to view the source code of these files.</p> <h2 id="input-handler-kinds"><a href="#input-handler-kinds" class="header-anchor">#</a> Input Handler Kinds</h2> <p>There are currently two types of input handlers:</p> <ol><li>text input handlers accepting arbitrary text input,</li> <li>list input handlers providing a list of options for the user to choose from.</li></ol> <p>Text input handlers always forward the entered text to the command,
while list input handlers can handle any JSON-serializable value,
accompanied by a caption for their respective list entry.</p> <h2 id="implementing-an-input-handler"><a href="#implementing-an-input-handler" class="header-anchor">#</a> Implementing an Input Handler</h2> <p>Because input handlers are using a rather generic interface,
adding one to your command
may require careful thinking
and may not be the most intuitive process.</p> <p>We will implement an example input handler
and explain more gears you can tweak
for advanced configuration.</p> <div class="custom-block warning"><p class="custom-block-title">Important</p> <p>To use an input handler for a command,
<strong>the command must have an entry in the <a href="/guide/extensibility/command_palette.html">Command Palette</a></strong>.
This is easy to forget,
so make sure to remember!</p></div> <p>Let's start with a very simple command
that inserts the given text into the view.
The following two files
can be placed in any package folder,
including &quot;User&quot;.</p> <p><code>simple_plugin.py</code>:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">import</span> sublime_plugin


<span class="token keyword">class</span> <span class="token class-name">SimpleCommand</span><span class="token punctuation">(</span>sublime_plugin<span class="token punctuation">.</span>TextCommand<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> edit<span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> region <span class="token keyword">in</span> self<span class="token punctuation">.</span>view<span class="token punctuation">.</span>sel<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>view<span class="token punctuation">.</span>replace<span class="token punctuation">(</span>edit<span class="token punctuation">,</span> region<span class="token punctuation">,</span> text<span class="token punctuation">)</span>
</code></pre></div><p><code>Simple.sublime-commands</code>:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;caption&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Simple Command&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token string">&quot;simple&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><h3 id="the-command-input-method"><a href="#the-command-input-method" class="header-anchor">#</a> The <code>*Command.input</code> Method</h3> <p>When implementing a command,
it receives keyed arguments to its <code>run</code> method.
When a parameter in the signature provides no default value,
it can only be called if arguments are provided for all such parameters.
Calling a command with too few arguments will fail
and cause an exception to be printed to the console.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt;&gt;&gt; window.run_command(&quot;simple&quot;)
Traceback (most recent call last):
  File &quot;/opt/sublime_text/Lib/python38/sublime_plugin.py&quot;, line 1270, in run_
    return self.run()
TypeError: run() missing 1 required positional argument: 'text'
</code></pre></div><p>In a situation like this,
a command may implement <a href="https://www.sublimetext.com/docs/api_reference.html#sublime_plugin.TextCommand" target="_blank" rel="noopener noreferrer">the <code>input</code> method<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
and return an input handler instance
that provides Sublime Text
with the necessary information
to display an input handler.</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">import</span> sublime_plugin


<span class="token keyword">class</span> <span class="token class-name">SimpleCommand</span><span class="token punctuation">(</span>sublime_plugin<span class="token punctuation">.</span>TextCommand<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> edit<span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> region <span class="token keyword">in</span> self<span class="token punctuation">.</span>view<span class="token punctuation">.</span>sel<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>view<span class="token punctuation">.</span>replace<span class="token punctuation">(</span>edit<span class="token punctuation">,</span> region<span class="token punctuation">,</span> text<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">input</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> MyTextInputHandler<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>The <code>input</code> function takes an <code>args</code> parameter
that is a dict of all currently known arguments to the command.
Since we know that our only required argument (<code>text</code>)
is missing at this point,
we won't use the parameter.</p> <p>We haven't defined <code>MyTextInputHandler</code> yet,
so let's do that.</p> <h3 id="subclassing-textinputhandler"><a href="#subclassing-textinputhandler" class="header-anchor">#</a> Subclassing <code>TextInputHandler</code></h3> <p>To create a simple input handler for text,
we create a subclass of <a href="https://www.sublimetext.com/docs/api_reference.html#sublime_plugin.TextInputHandler" target="_blank" rel="noopener noreferrer"><code>sublime_plugin.TextInputHandler</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.
In our subclass,
we can override specific methods.
For the most basic functionality,
we need <code>name</code>.
Additionally, for convenience,
we define <code>placeholder</code>.</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">class</span> <span class="token class-name">MyTextInputHandler</span><span class="token punctuation">(</span>sublime_plugin<span class="token punctuation">.</span>TextInputHandler<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">name</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">&quot;text&quot;</span>

    <span class="token keyword">def</span> <span class="token function">placeholder</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Text to insert&quot;</span>
</code></pre></div><p>And that's it.
Here is what it looks like:</p> <video controls="controls" src="/assets/media/simple_input_handler.b0f99dcd.mp4"></video> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Of course, you can still call the command like before
from a key binding or via the console.
When all required arguments are provided,
the input handler will be skipped
and the command run immediately.</p></div> <h3 id="rendering-a-preview"><a href="#rendering-a-preview" class="header-anchor">#</a> Rendering a Preview</h3> <p>The <code>preview</code> method is called
for every modification of the entered text
and allows to show a small preview
below the Command Palette.
The preview can either be pure text
or can use <a href="https://www.sublimetext.com/docs/minihtml.html" target="_blank" rel="noopener noreferrer">minihtml<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
for a markup-enabled format.</p> <p>The following snippet extends our input handler from earlier
to show the amount of characters that will be inserted:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">class</span> <span class="token class-name">MyTextInputHandler</span><span class="token punctuation">(</span>sublime_plugin<span class="token punctuation">.</span>TextInputHandler<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">name</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">&quot;text&quot;</span>

    <span class="token keyword">def</span> <span class="token function">placeholder</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Text to insert&quot;</span>

    <span class="token keyword">def</span> <span class="token function">preview</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Characters: {}&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>There are additional methods that can be overriden.
These are described <a href="https://www.sublimetext.com/docs/api_reference.html#sublime_plugin.TextInputHandler" target="_blank" rel="noopener noreferrer">in the documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h3 id="using-dynamic-data"><a href="#using-dynamic-data" class="header-anchor">#</a> Using Dynamic Data</h3> <p>You may have noticed that our <code>MyTextInputHandler</code> class
is entirely separate from our <code>SampleCommand</code>.
In the event that we want the input handler
to depend on some dynamic data,
such as the current view's selection,
we will have to provide such values
to the input handler's constructor.</p> <p>The following snippet passes the text command's <code>View</code> instance
to the input handler's constructor.
The constructor itself stores the instance
in an instance attribute
and later accesses it from <code>preview</code>.</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">import</span> sublime_plugin


<span class="token keyword">class</span> <span class="token class-name">SimpleCommand</span><span class="token punctuation">(</span>sublime_plugin<span class="token punctuation">.</span>TextCommand<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> edit<span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> region <span class="token keyword">in</span> self<span class="token punctuation">.</span>view<span class="token punctuation">.</span>sel<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>view<span class="token punctuation">.</span>replace<span class="token punctuation">(</span>edit<span class="token punctuation">,</span> region<span class="token punctuation">,</span> text<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">input</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> MyTextInputHandler<span class="token punctuation">(</span>self<span class="token punctuation">.</span>view<span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">MyTextInputHandler</span><span class="token punctuation">(</span>sublime_plugin<span class="token punctuation">.</span>TextInputHandler<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> view<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>view <span class="token operator">=</span> view

    <span class="token keyword">def</span> <span class="token function">name</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">&quot;text&quot;</span>

    <span class="token keyword">def</span> <span class="token function">placeholder</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Text to insert&quot;</span>

    <span class="token keyword">def</span> <span class="token function">preview</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token string">&quot;Selections: {}, Characters: {}&quot;</span>
                <span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>view<span class="token punctuation">.</span>sel<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><video controls="controls" src="/assets/media/simple_input_handler_preview.4f19aaea.mp4"></video> <h2 id="providing-a-list-of-options-with-listinputhandler"><a href="#providing-a-list-of-options-with-listinputhandler" class="header-anchor">#</a> Providing a List Of Options With <code>ListInputHandler</code></h2> <p>Instead of free form input,
you can provide the user
with a list of values
that they can choose from.
This is done by sublassing <code>sublime_plugin.ListInputHandler</code>
and providing an <code>list_items</code> method
that returns a list of values to choose from.
This list can either be a list of strings
or a list of tuples,
where the first element indicates the text to be shown
and the second element the value to insert as the command's argument.</p> <p>Following is a small example command
that offers a list of <a href="https://html.spec.whatwg.org/multipage/syntax.html#character-references" target="_blank" rel="noopener noreferrer">named HTML entities<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
using the built-in <a href="https://docs.python.org/3/library/html.entities.html" target="_blank" rel="noopener noreferrer"><code>html.entities</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> module:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">from</span> html<span class="token punctuation">.</span>entities <span class="token keyword">import</span> html5

<span class="token keyword">import</span> sublime_plugin


<span class="token keyword">class</span> <span class="token class-name">InsertHtmlEntityCommand</span><span class="token punctuation">(</span>sublime_plugin<span class="token punctuation">.</span>TextCommand<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> edit<span class="token punctuation">,</span> entity<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> region <span class="token keyword">in</span> self<span class="token punctuation">.</span>view<span class="token punctuation">.</span>sel<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>view<span class="token punctuation">.</span>replace<span class="token punctuation">(</span>edit<span class="token punctuation">,</span> region<span class="token punctuation">,</span> <span class="token string">&quot;&amp;&quot;</span> <span class="token operator">+</span> entity<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">input</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> EntityInputHandler<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">EntityInputHandler</span><span class="token punctuation">(</span>sublime_plugin<span class="token punctuation">.</span>ListInputHandler<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">list_items</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>html5<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">preview</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Character: {}&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>html5<span class="token punctuation">.</span>get<span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Notice how we don't implement <code>name</code> here,
because Sublime Text can automatically infer
the input handler's target argument name
from the class name,
using the same logic as for command names
but stripping &quot;InputHandler&quot; instead.</p></div> <div class="custom-block warning"><p class="custom-block-title">Reminder</p> <p>Remember that you need to make the above command
available to the Command Palette
by specifying it in a <code>.sublime-commands</code> file.</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span> <span class="token property">&quot;caption&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Insert Html Entity&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token string">&quot;insert_html_entity&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div></div> <p>Here is what it looks like in action:</p> <video controls="controls" src="/assets/media/list_input_handler.f60a77e1.mp4"></video> <h2 id="implementing-multiple-input-handlers"><a href="#implementing-multiple-input-handlers" class="header-anchor">#</a> Implementing Multiple Input Handlers</h2> <p>When a command requires multiple arguments
that the user must provide,
things change a bit.
Notably, you know must add logic inside <code>input</code>
that returns the appropriate input handler
based on which arguments are still missing.
The order in which these are returned matters,
because input handlers that received input
remain visible in the Command Palette
to visualize the current input step
in a breadcrumbs style.
And finally, the input handlers' <code>description</code> methods will be used
to render text for these breadcrumbs.
(Since the default behavior is to show the inserted value,
this is used only rarely.)</p> <p>Let's write a command that multiplies two operands.</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">import</span> sublime_plugin


<span class="token keyword">class</span> <span class="token class-name">MultiplyCommand</span><span class="token punctuation">(</span>sublime_plugin<span class="token punctuation">.</span>TextCommand<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> edit<span class="token punctuation">,</span> operand1<span class="token punctuation">,</span> operand2<span class="token punctuation">)</span><span class="token punctuation">:</span>
        result <span class="token operator">=</span> <span class="token builtin">float</span><span class="token punctuation">(</span>operand1<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token builtin">float</span><span class="token punctuation">(</span>operand2<span class="token punctuation">)</span>
        <span class="token keyword">for</span> region <span class="token keyword">in</span> self<span class="token punctuation">.</span>view<span class="token punctuation">.</span>sel<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>view<span class="token punctuation">.</span>replace<span class="token punctuation">(</span>edit<span class="token punctuation">,</span> region<span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">input</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> name <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">'operand1'</span><span class="token punctuation">,</span> <span class="token string">'operand2'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> name <span class="token keyword">not</span> <span class="token keyword">in</span> args<span class="token punctuation">:</span>
                <span class="token keyword">return</span> NumberInputHandler<span class="token punctuation">(</span>name<span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">NumberInputHandler</span><span class="token punctuation">(</span>sublime_plugin<span class="token punctuation">.</span>TextInputHandler<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>_name <span class="token operator">=</span> name

    <span class="token keyword">def</span> <span class="token function">name</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>_name

    <span class="token keyword">def</span> <span class="token function">placeholder</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Number&quot;</span>

    <span class="token keyword">def</span> <span class="token function">validate</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            <span class="token builtin">float</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span>
        <span class="token keyword">except</span> ValueError<span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token boolean">False</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token boolean">True</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>In this command, we only used a single input handler class for two parameters
by returning an instance variable in the <code>name</code> function.</p></div> <video controls="controls" src="/assets/media/multiply_input.eb04ffbe.mp4"></video> <p>The command works as it advertises.
It asks for two numbers when invoked from the command palette consecutively.
However, it does not show a breadcrumb for the first operand
after we confirmed it.
This is because the <code>input</code> command is re-run after the first argument,
since we need two arguments,
and information about the previous input handler is lost.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Having problems running this command?
Did you add a <code>.sublime-commands</code> entry for it?</p></div> <h3 id="the-next-input-method"><a href="#the-next-input-method" class="header-anchor">#</a> The <code>next_input</code> Method</h3> <p>To show the before-mentioned breadcrumb,
the first input handler needs to know
what input handler should be the next
and return it in a <code>next_input</code> method.</p> <p>You could do so in a static way,
but let's try a dynamic approach.
Remember that you don't need to ask
for the second argument
if it was already provided.</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">import</span> sublime_plugin


<span class="token keyword">class</span> <span class="token class-name">MultiplyCommand</span><span class="token punctuation">(</span>sublime_plugin<span class="token punctuation">.</span>TextCommand<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> edit<span class="token punctuation">,</span> operand1<span class="token punctuation">,</span> operand2<span class="token punctuation">)</span><span class="token punctuation">:</span>
        result <span class="token operator">=</span> <span class="token builtin">float</span><span class="token punctuation">(</span>operand1<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token builtin">float</span><span class="token punctuation">(</span>operand2<span class="token punctuation">)</span>
        <span class="token keyword">for</span> region <span class="token keyword">in</span> self<span class="token punctuation">.</span>view<span class="token punctuation">.</span>sel<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>view<span class="token punctuation">.</span>replace<span class="token punctuation">(</span>edit<span class="token punctuation">,</span> region<span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">input</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">:</span>
        names <span class="token operator">=</span> <span class="token punctuation">[</span>name <span class="token keyword">for</span> name <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">'operand1'</span><span class="token punctuation">,</span> <span class="token string">'operand2'</span><span class="token punctuation">]</span>
                 <span class="token keyword">if</span> name <span class="token keyword">not</span> <span class="token keyword">in</span> args<span class="token punctuation">]</span>
        <span class="token keyword">if</span> names<span class="token punctuation">:</span>
            <span class="token keyword">return</span> MultiNumberInputHandler<span class="token punctuation">(</span>names<span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">MultiNumberInputHandler</span><span class="token punctuation">(</span>sublime_plugin<span class="token punctuation">.</span>TextInputHandler<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> names<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>_name<span class="token punctuation">,</span> <span class="token operator">*</span>self<span class="token punctuation">.</span>next_names <span class="token operator">=</span> names

    <span class="token keyword">def</span> <span class="token function">name</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>_name

    <span class="token keyword">def</span> <span class="token function">placeholder</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Number&quot;</span>

    <span class="token keyword">def</span> <span class="token function">next_input</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>next_names<span class="token punctuation">:</span>
            <span class="token keyword">return</span> MultiNumberInputHandler<span class="token punctuation">(</span>self<span class="token punctuation">.</span>next_names<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">validate</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            <span class="token builtin">float</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span>
        <span class="token keyword">except</span> ValueError<span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token boolean">False</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token boolean">True</span>
</code></pre></div><p>In this command,
we collect all the arguments we need from the first call
and change <code>NumberInputHandler</code> to <code>MultiNumberInputHandler</code>
that accepts a list of argument names to query.
The destructuring assignment in line 19
splits the list into a &quot;first&quot; and &quot;rest&quot;,
so that the rest of the required arguments can be returned
in the <code>next_input</code> method.</p> <p>Let's see how it looks when invoked:</p> <video controls="controls" src="/assets/media/multiply_next_input.05a4a216.mp4"></video> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Both <code>NumberInputHandler</code> and <code>MultiNumberInputHandler</code>
implement a <code>validate</code> method that returns a boolean
if the passed text can be parsed into a floating point number.
The effect is that for non-numeric text the input is rejected
and nothing happens when pressing <span class="kbd-container"><span title="enter"><kbd>⏎</kbd></span></span>.
Try for yourself!</p></div> <h2 id="code-archive"><a href="#code-archive" class="header-anchor">#</a> Code Archive</h2> <p>The final code examples presented on this page
<a href="https://gist.github.com/FichteFoll/f850a62323c461ef7c54eb2cf623b033" target="_blank" rel="noopener noreferrer">have been uploaded to a Gist<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.
You can download a <a href="https://gist.github.com/FichteFoll/f850a62323c461ef7c54eb2cf623b033/archive/master.zip" target="_blank" rel="noopener noreferrer">zipball<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> of it
and extract it into a local package of your choice
to experiment with them.</p> <h2 id="invoking-commands-with-input-handlers"><a href="#invoking-commands-with-input-handlers" class="header-anchor">#</a> Invoking Commands With Input Handlers</h2> <p>When invoking a command with an input handler
and without all required arguments
from a plugin or key binding,
it is advised to use the <code>show_overlay</code> command.
Commands invoked that way
will have their <code>input</code> method called
before ST attempts to call <code>run</code>,
resulting in more predictable behavior.
Otherwise, Sublime Text will try to run the command as normally
(running its <code>run</code> method)
and only check the command's <code>input</code> method
if the call failed because of insufficient arguments.</p> <p><strong>Examples</strong>:</p> <div class="language-py extra-class"><pre class="language-py"><code>view<span class="token punctuation">.</span>run_command<span class="token punctuation">(</span>
    <span class="token string">'show_overlay'</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">'overlay'</span><span class="token punctuation">:</span> <span class="token string">'command_palette'</span><span class="token punctuation">,</span> <span class="token string">'command'</span><span class="token punctuation">:</span> <span class="token string">'multiply'</span><span class="token punctuation">,</span> <span class="token string">'args'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'operand1'</span><span class="token punctuation">:</span> <span class="token number">12</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
</code></pre></div><div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token string">&quot;show_overlay&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;args&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;overlay&quot;</span><span class="token operator">:</span> <span class="token string">&quot;command_palette&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token string">&quot;multiply&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;args&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">&quot;operand1&quot;</span><span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="caveats"><a href="#caveats" class="header-anchor">#</a> Caveats</h2> <ul><li><p>As mentioned countless times already,
there must be an entry for the Command Palette
to be able to use input handlers.</p></li> <li><p>A command's <code>input</code> method may be called multiple times
until the user can access it.</p></li> <li><p><code>is_visible</code> and <code>is_enabled</code> cannot decide their return value
based on the given arguments
when an input handler is involved.
(<a href="https://github.com/sublimehq/sublime_text/issues/3249" target="_blank" rel="noopener noreferrer">#3249<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>)</p></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/sublimetext-io/docs.sublimetext.io/edit/master/docs/guide/extensibility/plugins/input_handlers.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">6/3/2023, 4:50:38 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/extensibility/packages.html" class="prev">
        Packages
      </a></span> <span class="next"><a href="/guide/extensibility/snippets.html">
        Snippets
      </a>
      →
    </span></p></div>  <div class="footer-wrapper" data-v-7b8cc140><span data-v-7b8cc140><a target="blank" href="https://github.com/danktuary/vuepress-theme-yuu" data-v-7b8cc140>Based on vuepress-theme-yuu</a></span> <span data-v-7b8cc140>
    Copyright:
    <a data-v-7b8cc140><span data-v-7b8cc140>2013 - </span>
      2023
    </a></span></div></main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.5ae8f9cc.js" defer></script><script src="/assets/js/2.2f4a13d7.js" defer></script><script src="/assets/js/3.0d379e39.js" defer></script><script src="/assets/js/6.c5a0a48d.js" defer></script><script src="/assets/js/19.5f0c50b9.js" defer></script>
  </body>
</html>
