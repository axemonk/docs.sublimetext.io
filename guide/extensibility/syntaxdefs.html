<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Syntax Definitions | Sublime Text Community Documentation</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Community-driven Documentation for Sublime Text">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta name="author" content="sublime text community">
    <meta name="keywords" content="sublime text,sublime,documentation">
    <meta name="theme-color" content="#ff6600">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.abfa3be9.css" as="style"><link rel="preload" href="/assets/js/app.a3a88a9a.js" as="script"><link rel="preload" href="/assets/js/3.205f73e3.js" as="script"><link rel="preload" href="/assets/js/2.4410a5fb.js" as="script"><link rel="preload" href="/assets/js/32.f41b8da7.js" as="script"><link rel="preload" href="/assets/js/6.ebf4e6d0.js" as="script"><link rel="prefetch" href="/assets/js/10.5381bd0c.js"><link rel="prefetch" href="/assets/js/11.98df9b3f.js"><link rel="prefetch" href="/assets/js/12.bdc19856.js"><link rel="prefetch" href="/assets/js/13.bb4ca174.js"><link rel="prefetch" href="/assets/js/14.9f7e9322.js"><link rel="prefetch" href="/assets/js/15.8908b732.js"><link rel="prefetch" href="/assets/js/16.5c684044.js"><link rel="prefetch" href="/assets/js/17.05f580b8.js"><link rel="prefetch" href="/assets/js/18.950f2482.js"><link rel="prefetch" href="/assets/js/19.d8dcccf3.js"><link rel="prefetch" href="/assets/js/20.1b576090.js"><link rel="prefetch" href="/assets/js/21.7a805d85.js"><link rel="prefetch" href="/assets/js/22.1757ffed.js"><link rel="prefetch" href="/assets/js/23.b428d055.js"><link rel="prefetch" href="/assets/js/24.eae087ea.js"><link rel="prefetch" href="/assets/js/25.9eb5a7a5.js"><link rel="prefetch" href="/assets/js/26.1d03e6ef.js"><link rel="prefetch" href="/assets/js/27.a26310ec.js"><link rel="prefetch" href="/assets/js/28.928f4f6e.js"><link rel="prefetch" href="/assets/js/29.c1b03737.js"><link rel="prefetch" href="/assets/js/30.e0e53ed8.js"><link rel="prefetch" href="/assets/js/31.ce651968.js"><link rel="prefetch" href="/assets/js/33.30db6080.js"><link rel="prefetch" href="/assets/js/34.db08bbfd.js"><link rel="prefetch" href="/assets/js/35.fbc06386.js"><link rel="prefetch" href="/assets/js/36.0cf4abef.js"><link rel="prefetch" href="/assets/js/37.4d4c9a6d.js"><link rel="prefetch" href="/assets/js/38.609a9608.js"><link rel="prefetch" href="/assets/js/39.b64c4ddf.js"><link rel="prefetch" href="/assets/js/4.1f3ee13a.js"><link rel="prefetch" href="/assets/js/40.eaecdccb.js"><link rel="prefetch" href="/assets/js/41.961e6861.js"><link rel="prefetch" href="/assets/js/42.bf25a112.js"><link rel="prefetch" href="/assets/js/43.e1806076.js"><link rel="prefetch" href="/assets/js/44.a75ec240.js"><link rel="prefetch" href="/assets/js/45.b98b20cd.js"><link rel="prefetch" href="/assets/js/46.cd0818a1.js"><link rel="prefetch" href="/assets/js/47.3a1e117e.js"><link rel="prefetch" href="/assets/js/48.942e128e.js"><link rel="prefetch" href="/assets/js/49.c44837dc.js"><link rel="prefetch" href="/assets/js/5.96299a13.js"><link rel="prefetch" href="/assets/js/50.943814b1.js"><link rel="prefetch" href="/assets/js/51.b54a2479.js"><link rel="prefetch" href="/assets/js/52.fadf2600.js"><link rel="prefetch" href="/assets/js/53.b05b92e7.js"><link rel="prefetch" href="/assets/js/54.00e9612c.js"><link rel="prefetch" href="/assets/js/55.f19658f5.js"><link rel="prefetch" href="/assets/js/56.6523fb65.js"><link rel="prefetch" href="/assets/js/7.5bab79c8.js"><link rel="prefetch" href="/assets/js/8.6108ab6d.js"><link rel="prefetch" href="/assets/js/9.cabce215.js">
    <link rel="stylesheet" href="/assets/css/0.styles.abfa3be9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Sublime Text Community Documentation</span></a> <div class="links"><!----> <div class="user-settings"><a href="#" class="settings-button"><svg aria-hidden="true" data-prefix="fas" data-icon="cog" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-cog fa-w-16 settings-icon"><path fill="currentColor" d="M444.788 291.1l42.616 24.599c4.867 2.809 7.126 8.618 5.459 13.985-11.07 35.642-29.97 67.842-54.689 94.586a12.016 12.016 0 0 1-14.832 2.254l-42.584-24.595a191.577 191.577 0 0 1-60.759 35.13v49.182a12.01 12.01 0 0 1-9.377 11.718c-34.956 7.85-72.499 8.256-109.219.007-5.49-1.233-9.403-6.096-9.403-11.723v-49.184a191.555 191.555 0 0 1-60.759-35.13l-42.584 24.595a12.016 12.016 0 0 1-14.832-2.254c-24.718-26.744-43.619-58.944-54.689-94.586-1.667-5.366.592-11.175 5.459-13.985L67.212 291.1a193.48 193.48 0 0 1 0-70.199l-42.616-24.599c-4.867-2.809-7.126-8.618-5.459-13.985 11.07-35.642 29.97-67.842 54.689-94.586a12.016 12.016 0 0 1 14.832-2.254l42.584 24.595a191.577 191.577 0 0 1 60.759-35.13V25.759a12.01 12.01 0 0 1 9.377-11.718c34.956-7.85 72.499-8.256 109.219-.007 5.49 1.233 9.403 6.096 9.403 11.723v49.184a191.555 191.555 0 0 1 60.759 35.13l42.584-24.595a12.016 12.016 0 0 1 14.832 2.254c24.718 26.744 43.619 58.944 54.689 94.586 1.667 5.366-.592 11.175-5.459 13.985L444.788 220.9a193.485 193.485 0 0 1 0 70.2zM336 256c0-44.112-35.888-80-80-80s-80 35.888-80 80 35.888 80 80 80 80-35.888 80-80z"></path></svg></a> <div class="user-settings-menu" style="display:none;"><div class="theme-options"><!----> <!----> <div class="dark-theme-options toggle-option"><label for="dark-theme-toggle">Enable Dark Theme?</label> <input id="dark-theme-toggle" type="checkbox"></div> <!----> <!----></div></div></div> <!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/reference/" class="nav-link">
  Reference
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Other" class="dropdown-title"><span class="title">Other</span> <span class="arrow down"></span></button> <button type="button" aria-label="Other" class="mobile-dropdown-title"><span class="title">Other</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/GLOSSARY.html" class="nav-link">
  Glossary
</a></li><li class="dropdown-item"><!----> <a href="/other/question.html" class="nav-link">
  F.A.Q
</a></li><li class="dropdown-item"><!----> <a href="https://www.sublimetext.com/docs/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Offical Docs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/sublimetext-io/docs.sublimetext.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/reference/" class="nav-link">
  Reference
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Other" class="dropdown-title"><span class="title">Other</span> <span class="arrow down"></span></button> <button type="button" aria-label="Other" class="mobile-dropdown-title"><span class="title">Other</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/GLOSSARY.html" class="nav-link">
  Glossary
</a></li><li class="dropdown-item"><!----> <a href="/other/question.html" class="nav-link">
  F.A.Q
</a></li><li class="dropdown-item"><!----> <a href="https://www.sublimetext.com/docs/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Offical Docs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/sublimetext-io/docs.sublimetext.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/guide/" aria-current="page" class="sidebar-link">Introduction</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Getting Started</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/getting-started/installation.html" class="sidebar-link">Installation</a></li><li><a href="/guide/getting-started/basic-concepts.html" class="sidebar-link">Basic Concepts</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Basic Usage</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/usage/editing.html" class="sidebar-link">Editing</a></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/guide/usage/file-management/" class="sidebar-heading clickable"><span>File Management &amp; Navigation</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/usage/file-management/projects.html" class="sidebar-link">Projects</a></li><li><a href="/guide/usage/file-management/navigation.html" class="sidebar-link">Navigation</a></li></ul></section></li><li><a href="/guide/usage/search-and-replace.html" class="sidebar-link">Search and Replace</a></li><li><a href="/guide/usage/build-systems.html" class="sidebar-link">Build Systems</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/guide/customization/" class="sidebar-heading clickable"><span>Customization</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/customization/" class="sidebar-link">Overview</a></li><li><a href="/guide/customization/settings.html" class="sidebar-link">Settings</a></li><li><a href="/guide/customization/key_bindings.html" class="sidebar-link">Key Bindings</a></li><li><a href="/guide/customization/menus.html" class="sidebar-link">Menus</a></li><li><a href="/guide/customization/color_schemes.html" class="sidebar-link">Color Schemes</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/guide/extensibility/" class="sidebar-heading clickable router-link-active open"><span>Extensibility &amp; Automation</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/extensibility/" aria-current="page" class="sidebar-link">Extending Sublime Text</a></li><li><a href="/guide/extensibility/command_palette.html" class="sidebar-link">Command Palette</a></li><li><a href="/guide/extensibility/commands.html" class="sidebar-link">Commands</a></li><li><a href="/guide/extensibility/completions.html" class="sidebar-link">Completions</a></li><li><a href="/guide/extensibility/macros.html" class="sidebar-link">Macros</a></li><li><a href="/guide/extensibility/packages.html" class="sidebar-link">Packages</a></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/guide/extensibility/plugins/" class="sidebar-heading clickable"><span>Plugins</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/extensibility/plugins/input_handlers.html" class="sidebar-link">Input Handlers</a></li></ul></section></li><li><a href="/guide/extensibility/snippets.html" class="sidebar-link">Snippets</a></li><li><a href="/guide/extensibility/syntaxdefs.html" aria-current="page" class="active sidebar-link">Syntax Definitions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/extensibility/syntaxdefs.html#prerequisites" class="sidebar-link">Prerequisites</a></li><li class="sidebar-sub-header"><a href="/guide/extensibility/syntaxdefs.html#file-format" class="sidebar-link">File format</a></li><li class="sidebar-sub-header"><a href="/guide/extensibility/syntaxdefs.html#scopes" class="sidebar-link">Scopes</a></li><li class="sidebar-sub-header"><a href="/guide/extensibility/syntaxdefs.html#how-syntax-definitions-work" class="sidebar-link">How Syntax Definitions Work</a></li><li class="sidebar-sub-header"><a href="/guide/extensibility/syntaxdefs.html#your-first-syntax-definition" class="sidebar-link">Your First Syntax Definition</a></li><li class="sidebar-sub-header"><a href="/guide/extensibility/syntaxdefs.html#creating-a-new-syntax-definition" class="sidebar-link">Creating A New Syntax Definition</a></li><li class="sidebar-sub-header"><a href="/guide/extensibility/syntaxdefs.html#analyzing-patterns" class="sidebar-link">Analyzing Patterns</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/extensibility/syntaxdefs.html#matches" class="sidebar-link">Matches</a></li><li class="sidebar-sub-header"><a href="/guide/extensibility/syntaxdefs.html#fine-tuning-matches" class="sidebar-link">Fine Tuning Matches</a></li><li class="sidebar-sub-header"><a href="/guide/extensibility/syntaxdefs.html#begin-end-rules" class="sidebar-link">Begin-End Rules</a></li><li class="sidebar-sub-header"><a href="/guide/extensibility/syntaxdefs.html#final-touches" class="sidebar-link">Final Touches</a></li></ul></li></ul></li></ul></section></li></ul> </aside> <main class="page"><div class="page-title" style="display:;"><h1>Syntax Definitions</h1> <hr></div>  <div class="theme-default-content content__default"><p>Syntax definitions make Sublime Text aware of programming and markup languages.
Most noticeably, they work together with colors to provide syntax highlighting.
Syntax definitions define <em>scopes</em> that divide the text in a buffer into named
regions. Several editing features in Sublime Text make extensive use of
this fine-grained contextual information.</p> <p>Essentially, syntax definitions consist of regular expressions used to find
text, as well as more or less arbitrary, dot-separated strings called <em>scopes</em>
or <em>scope names</em>. For every occurrence of a given regular expression, Sublime
Text gives the matching text its corresponding <em>scope name</em>.</p> <div class="custom-block warning"><p class="custom-block-title">Deprecation Notice</p> <p>For Sublime Text 3 (Build 3084),
a new syntax definition format has been added
with the <code>.sublime-syntax</code> extension.</p> <p>It is highly encouraged to be used
in favor of the legacy TextMate format
described in this document,
unless compatibility with older versions
or other editors is desired.</p> <p>Documentation is available
at the <a href="https://www.sublimetext.com/docs/syntax.html" target="_blank" rel="noopener noreferrer">official documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></div> <div class="custom-block seealso"><p class="custom-block-title">See Also</p><p><a href="/reference/syntaxdefs_legacy.html">Reference for TextMate Syntax Definitions</a></p></div><h2 id="prerequisites"><a href="#prerequisites" class="header-anchor">#</a> Prerequisites</h2> <p>In order to follow this tutorial, you will need to install
<a href="https://github.com/SublimeText/PackageDev" target="_blank" rel="noopener noreferrer">PackageDev<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, a package
intended to ease the creation of new syntax definitions for Sublime
Text. Follow the installation notes in the &quot;Getting Started&quot; section of
the readme.</p> <h2 id="file-format"><a href="#file-format" class="header-anchor">#</a> File format</h2> <p>Sublime Text uses <a href="https://en.wikipedia.org/wiki/Property_list" target="_blank" rel="noopener noreferrer">property list<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
(Plist) files to store syntax definitions. However, because editing XML files is
a cumbersome task, we'll use <a href="https://en.wikipedia.org/wiki/YAML" target="_blank" rel="noopener noreferrer">YAML<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> instead
and convert it to Plist format afterwards. This is where the <a title="An installable package that provides syntax highlighting, snippets, completions, and more for Sublime Text's resource files.
" class="term">PackageDev</a> package
(mentioned above) comes in.</p> <div class="custom-block tip"><p class="custom-block-title">Note</p> <p>If you experience unexpected errors during this tutorial, chances are
<a title="An installable package that provides syntax highlighting, snippets, completions, and more for Sublime Text's resource files.
" class="term">PackageDev</a> or YAML is to blame. Don't immediately think your problem is
due to a bug in Sublime Text.</p></div> <p>By all means, do edit the Plist files by hand if you prefer to work in
XML, but always keep in mind their differing needs in regards to escape
sequences, many XML tags etc.</p> <h2 id="scopes"><a href="#scopes" class="header-anchor">#</a> Scopes</h2> <p>Scopes are a key concept in Sublime Text. Essentially, they are named
text regions in a buffer. They don't do anything by themselves, but
Sublime Text peeks at them when it needs contextual information.</p> <p>For instance, when you trigger a snippet, Sublime Text checks the scope
bound to the snippet and looks at the caret's position in the file. If
the caret's current position matches the snippet's scope selector,
Sublime Text fires it off. Otherwise, nothing happens.</p> <div class="custom-block tip"><p class="custom-block-title">Info</p> <p>There's a slight difference between <em>scopes</em> and <em>scope selectors</em>: Scopes
are the names defined in a syntax definition, while scope selectors are used
in items like snippets and key bindings to target scopes. When creating a
new syntax definition, you care about scopes; when you want to constrain a
snippet to a certain scope, you use a scope selector.</p></div> <p>Scopes can be nested to allow for a high degree of granularity. You can drill
down the hierarchy very much like with CSS selectors. For instance, thanks to
scope selectors, you could have a key binding activated only within single
quoted strings in Python source code, but not inside single quoted strings in
any other language.</p> <p>Sublime Text inherits the idea of scopes from Textmate, a text editor for Mac.
<a href="https://manual.macromates.com/en/scope_selectors" target="_blank" rel="noopener noreferrer">Textmate's online manual<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> contains further information about scope selectors
that's useful for Sublime Text users too. In particular, Color Schemes make
extensive use of scopes to style every aspect of a language in the desired
color.</p> <h2 id="how-syntax-definitions-work"><a href="#how-syntax-definitions-work" class="header-anchor">#</a> How Syntax Definitions Work</h2> <p>At their core, syntax definitions are arrays of regular expressions
paired with scope names. Sublime Text will try to match these patterns
against a buffer's text and attach the corresponding scope name to all
occurrences. These pairs of regular expressions and scope names are
known as <em>rules</em>.</p> <p>Rules are applied in order, one line at a time. Rules are applied in the
following order:</p> <ol><li>The rule that matches at the first position in a line</li> <li>The rule that comes first in the array</li></ol> <p>Each rule consumes the matched text region, which therefore will be
excluded from the next rule's matching attempt (save for a few
exceptions). In practical terms, this means that you should take care to
go from more specific rules to more general ones when you create a new
syntax definition. Otherwise, a greedy regular expression might swallow
parts you'd like to have styled differently.</p> <p>Syntax definitions from separate files can be combined, and they can be
recursively applied too.</p> <h2 id="your-first-syntax-definition"><a href="#your-first-syntax-definition" class="header-anchor">#</a> Your First Syntax Definition</h2> <p>By way of example, let's create a syntax definition for Sublime Text
snippets. We'll be styling the actual snippet content, not the whole
<code>.sublime-snippet</code> file.</p> <div class="custom-block tip"><p class="custom-block-title">Note</p> <p>Since syntax definitions are primarily used to enable syntax highlighting,
we'll use the phrase <em>to style</em> to mean <em>to break down a source code file
into scopes</em>. Keep in mind, however, that colors are a different thing from
syntax definitions and that scopes have many more uses besides syntax
highlighting.</p></div> <p>Here are the elements we want to style in a snippet:</p> <ul><li>Variables (<code>$PARAM1</code>, <code>$USER_NAME</code>\ ...)</li> <li>Simple fields (<code>$0</code>, <code>$1</code>\ ...)</li> <li>Complex fields with placeholders (<code>${1:Hello}</code>)</li> <li>Nested fields (<code>${1:Hello ${2:World}!}</code>)</li> <li>Escape sequences (<code>\$</code>, <code>\&lt;</code>, …)</li> <li>Illegal sequences (<code>$</code>, <code>&lt;</code>, <code>\</code>, …)</li></ul> <p>Here are the elements we don't want to style because they are too complex for
this example:</p> <ul><li>Variable Substitution (<code>${1/Hello/Hi/g}</code>)</li></ul> <div class="custom-block tip"><p class="custom-block-title">Note</p> <p>Before continuing, make sure you've installed the <a title="An installable package that provides syntax highlighting, snippets, completions, and more for Sublime Text's resource files.
" class="term">PackageDev</a> package as
explained above.</p></div> <h2 id="creating-a-new-syntax-definition"><a href="#creating-a-new-syntax-definition" class="header-anchor">#</a> Creating A New Syntax Definition</h2> <p>To create a new syntax definition, follow these steps:</p> <ol><li>Go to <strong>Tools | Packages | Package Development | New Syntax
Definition</strong></li> <li>Save the new file in your <code>Packages/User</code> folder as a <code>.YAML-tmLanguage</code> file.</li></ol> <p>You now should see a file like this:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token comment"># [PackageDev] target_format: plist, ext: tmLanguage</span>
<span class="token punctuation">---</span>
<span class="token key atrule">name</span><span class="token punctuation">:</span> Syntax Name
<span class="token key atrule">scopeName</span><span class="token punctuation">:</span> source.syntax_name
<span class="token key atrule">fileTypes</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token key atrule">uuid</span><span class="token punctuation">:</span> 0da65be4<span class="token punctuation">-</span>5aac<span class="token punctuation">-</span>4b6f<span class="token punctuation">-</span>8071<span class="token punctuation">-</span>1aadb970b8d9

<span class="token key atrule">patterns</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span>
<span class="token punctuation">...</span>
</code></pre></div><p>Let's examine the key elements.</p> <ul><li><p><code>name</code><br>
The name that Sublime Text will display in the syntax definition
drop-down list. Use a short, descriptive name. Typically, you will
use the name of the programming language you are creating the syntax
definition for.</p></li> <li><p><code>scopeName</code><br>
The topmost scope for this syntax definition. It takes the form
<code>source.&lt;lang_name&gt;</code> or <code>text.&lt;lang_name&gt;</code>. For programming
languages, use <code>source</code>. For markup and everything else, use <code>text</code>.</p></li> <li><p><code>fileTypes</code><br>
This is a list of file extensions (without the leading dot). When
opening files of these types, Sublime Text will automatically
activate this syntax definition for them.</p></li> <li><p><code>uuid</code><br>
This is a unique identifier for this syntax definition. Each new
syntax definition gets its own uuid. Even though Sublime Text itself
ignores it, don't modify this.</p></li> <li><p><code>patterns</code><br>
A container for your patterns.</p></li></ul> <p>For our example, fill the template with the following information:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token comment"># [PackageDev] target_format: plist, ext: tmLanguage</span>
<span class="token punctuation">---</span>
<span class="token key atrule">name</span><span class="token punctuation">:</span> Sublime Snippet (Raw)
<span class="token key atrule">scopeName</span><span class="token punctuation">:</span> source.ssraw
<span class="token key atrule">fileTypes</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>ssraw<span class="token punctuation">]</span>
<span class="token key atrule">uuid</span><span class="token punctuation">:</span> 0da65be4<span class="token punctuation">-</span>5aac<span class="token punctuation">-</span>4b6f<span class="token punctuation">-</span>8071<span class="token punctuation">-</span>1aadb970b8d9

<span class="token key atrule">patterns</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span>
<span class="token punctuation">...</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Note</p> <p>YAML is not a very strict format, but can cause headaches when you don't
know its conventions. It supports single and double quotes, but you may also
omit them as long as the content does not create another YAML literal. If
the conversion to Plist fails, take a look at the output panel for more
information on the error. We'll explain later how to convert a syntax
definition in YAML to Plist. This will also cover the first commented line
in the template.</p> <p>The <code>---</code> and <code>...</code> are optional.</p></div> <h2 id="analyzing-patterns"><a href="#analyzing-patterns" class="header-anchor">#</a> Analyzing Patterns</h2> <p>The <code>patterns</code> array can contain several types of element. We'll look at
some of them in the following sections. If you want to learn more about
patterns, refer to Textmate's online manual.</p> <h3 id="matches"><a href="#matches" class="header-anchor">#</a> Matches</h3> <p>Matches take this form:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">match</span><span class="token punctuation">:</span> (<span class="token punctuation">?</span>i<span class="token punctuation">:</span>m)y \s+<span class="token punctuation">[</span>Rr<span class="token punctuation">]</span>egex
<span class="token key atrule">name</span><span class="token punctuation">:</span> string.format
<span class="token key atrule">comment</span><span class="token punctuation">:</span> This comment is optional.
</code></pre></div><p>Sublime Text uses <a href="https://github.com/kkos/oniguruma/blob/master/doc/RE" target="_blank" rel="noopener noreferrer">Oniguruma<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>'s syntax for regular expressions in
syntax definitions. Several existing syntax definitions make use of
features supported by this regular expression engine that aren't part of
perl-style regular expressions, hence the requirement for Oniguruma.</p> <dl><dt><code>match</code></dt> <dd>A regular expression Sublime Text will use to find matches.</dd> <dt><code>name</code></dt> <dd>The name of the scope that should be applied to any occurrences of <code>match</code>.</dd> <dt><code>comment</code></dt> <dd>An optional comment about this pattern.</dd></dl> <p>Let's go back to our example. It looks like this:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token comment"># [PackageDev] target_format: plist, ext: tmLanguage</span>
<span class="token punctuation">---</span>
<span class="token key atrule">name</span><span class="token punctuation">:</span> Sublime Snippet (Raw)
<span class="token key atrule">scopeName</span><span class="token punctuation">:</span> source.ssraw
<span class="token key atrule">fileTypes</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>ssraw<span class="token punctuation">]</span>
<span class="token key atrule">uuid</span><span class="token punctuation">:</span> 0da65be4<span class="token punctuation">-</span>5aac<span class="token punctuation">-</span>4b6f<span class="token punctuation">-</span>8071<span class="token punctuation">-</span>1aadb970b8d9

<span class="token key atrule">patterns</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span>
<span class="token punctuation">...</span>
</code></pre></div><p>That is, make sure the <code>patterns</code> array is empty.</p> <p>Now we can begin to add our rules for Sublime snippets. Let's start with
simple fields. These could be matched with a regex like so:</p> <div class="language-perl extra-class"><pre class="language-perl"><code><span class="token operator">\</span><span class="token variable">$[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">+</span>
<span class="token comment"># or...</span>
<span class="token operator">\</span><span class="token variable">$\</span>d<span class="token operator">+</span>
</code></pre></div><p>We can then build our pattern like this:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">name</span><span class="token punctuation">:</span> keyword.other.ssraw
<span class="token key atrule">match</span><span class="token punctuation">:</span> \$\d+
<span class="token key atrule">comment</span><span class="token punctuation">:</span> Tab stops like $1<span class="token punctuation">,</span> $2<span class="token punctuation">...</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Choosing the Right Scope Name</p> <p>Naming scopes isn't obvious sometimes. Check the <a href="https://manual.macromates.com/en/language_grammars#naming_conventions" target="_blank" rel="noopener noreferrer">Textmate naming
conventions<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for guidance on scope names. <a title="An installable package that provides syntax highlighting, snippets, completions, and more for Sublime Text's resource files.
" class="term">PackageDev</a> automatically
provides completions for scope names according to these conventions. It
is important to re-use the basic categories outlined there if you want
to achieve the highest compatibility with existing colors.</p> <p>Color schemes have hardcoded scope names in them. They could not
possibly include every scope name you can think of, so they target the
standard ones plus some rarer ones on occasion (like for CSS or
Markdown). This means that two color schemes using the same syntax
definition may render the text differently!</p> <p>Bear in mind too that you should use the scope name that best suits your
needs or preferences. It'd be perfectly fine to assign a scope like
<code>constant.numeric</code> to anything other than a number if you have a good
reason to do so.</p></div> <p>And we can add it to our syntax definition too:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token comment"># [PackageDev] target_format: plist, ext: tmLanguage</span>
<span class="token punctuation">---</span>
<span class="token key atrule">name</span><span class="token punctuation">:</span> Sublime Snippet (Raw)
<span class="token key atrule">scopeName</span><span class="token punctuation">:</span> source.ssraw
<span class="token key atrule">fileTypes</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>ssraw<span class="token punctuation">]</span>
<span class="token key atrule">uuid</span><span class="token punctuation">:</span> 0da65be4<span class="token punctuation">-</span>5aac<span class="token punctuation">-</span>4b6f<span class="token punctuation">-</span>8071<span class="token punctuation">-</span>1aadb970b8d9

<span class="token key atrule">patterns</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> <span class="token key atrule">comment</span><span class="token punctuation">:</span> Tab stops like $1<span class="token punctuation">,</span> $2<span class="token punctuation">...</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> keyword.other.ssraw
  <span class="token key atrule">match</span><span class="token punctuation">:</span> \$\d+
<span class="token punctuation">...</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Note</p> <p>You should use two spaces for indent. This is the recommended indent for
YAML and lines up with lists like shown above.</p></div> <p>We're now ready to convert our file to <code>.tmLanguage</code>. Syntax definitions use
Textmate's <code>.tmLanguage</code> extension for compatibility reasons. As explained
above, they are simply Plist XML files.</p> <p>Follow these steps to perform the conversion:</p> <ul><li>Make sure that <code>Automatic</code> is selected in <strong>Tools | Build System</strong>, or
select <code>Convert to ...</code>.</li> <li>Press <span class="kbd-container"><span title="ctrl+b"><kbd>Ctrl</kbd>&nbsp;<kbd>B</kbd></span></span>.
A <code>.tmLanguage</code> file will be generated for you in the same folder as
your <code>.YAML-tmLanguage</code> file.</li> <li>Sublime Text will reload the changes to the syntax definition.</li></ul> <p>In case you are wondering why <a title="An installable package that provides syntax highlighting, snippets, completions, and more for Sublime Text's resource files.
" class="term">PackageDev</a> knows what you want to convert your
file to: It's specified in the first comment line.</p> <p>You have now created your first syntax definition. Next, open a new file and
save it with the extension <code>.ssraw</code>. The buffer's syntax name should switch to
&quot;Sublime Snippet (Raw)&quot; automatically, and you should get syntax highlighting if
you type <code>$1</code> or any other simple snippet field.</p> <p>Let's proceed to creating another rule for environment variables.</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">comment</span><span class="token punctuation">:</span> Variables like $PARAM1<span class="token punctuation">,</span> $TM_SELECTION<span class="token punctuation">...</span>
<span class="token key atrule">name</span><span class="token punctuation">:</span> keyword.other.ssraw
<span class="token key atrule">match</span><span class="token punctuation">:</span> \$<span class="token punctuation">[</span>A<span class="token punctuation">-</span>Za<span class="token punctuation">-</span>z<span class="token punctuation">]</span><span class="token punctuation">[</span>A<span class="token punctuation">-</span>Za<span class="token punctuation">-</span>z0<span class="token punctuation">-</span>9_<span class="token punctuation">]</span>+
</code></pre></div><p>Repeat the above steps to update the <code>.tmLanguage</code> file.</p> <h3 id="fine-tuning-matches"><a href="#fine-tuning-matches" class="header-anchor">#</a> Fine Tuning Matches</h3> <p>You might have noticed, for instance, that the entire text in <code>$PARAM1</code> is
styled the same way. Depending on your needs or your personal preferences, you
may want the <code>$</code> to stand out. That's where <code>captures</code> come in. Using
captures, you can break a pattern down into components to target them
individually.</p> <p>Let's rewrite one of our previous patterns to use <code>captures</code>:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">comment</span><span class="token punctuation">:</span> Variables like $PARAM1<span class="token punctuation">,</span> $TM_SELECTION<span class="token punctuation">...</span>
<span class="token key atrule">name</span><span class="token punctuation">:</span> keyword.other.ssraw
<span class="token key atrule">match</span><span class="token punctuation">:</span> \$(<span class="token punctuation">[</span>A<span class="token punctuation">-</span>Za<span class="token punctuation">-</span>z<span class="token punctuation">]</span><span class="token punctuation">[</span>A<span class="token punctuation">-</span>Za<span class="token punctuation">-</span>z0<span class="token punctuation">-</span>9_<span class="token punctuation">]</span>+)
<span class="token key atrule">captures</span><span class="token punctuation">:</span>
  <span class="token key atrule">'1'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">name</span><span class="token punctuation">:</span> constant.numeric.ssraw<span class="token punctuation">}</span>
</code></pre></div><p>Captures introduce complexity to your rule, but they are pretty straightforward.
Notice how numbers refer to parenthesized groups left to right. Of course, you
can have as many capture groups as you want.</p> <div class="custom-block tip"><p class="custom-block-title">Note</p> <p>Writing <code>1</code> on a new line and pressing tab will autocomplete to <code>'1': {name: }</code> thanks to <a title="An installable package that provides syntax highlighting, snippets, completions, and more for Sublime Text's resource files.
" class="term">PackageDev</a>.</p></div> <p>Arguably, you'd want the other scope to be visually consistent with this one.
Go ahead and change it too.</p> <div class="custom-block tip"><p class="custom-block-title">Note</p> <p>As with ususal regular expressions and substitutions, the capture group
<code>'0'</code> applies to the whole match.</p></div> <h3 id="begin-end-rules"><a href="#begin-end-rules" class="header-anchor">#</a> Begin-End Rules</h3> <p>Up to now we've been using a simple rule. Although we've seen how to
dissect patterns into smaller components, sometimes you'll want to
target a larger portion of your source code that is clearly delimited by
start and end marks.</p> <p>Literal strings enclosed by quotation marks or other delimiting
constructs are better dealt with by begin-end rules. This is a skeleton
for one of these rules:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">name</span><span class="token punctuation">:</span>
<span class="token key atrule">begin</span><span class="token punctuation">:</span>
<span class="token key atrule">end</span><span class="token punctuation">:</span>
</code></pre></div><p>Well, at least in their simplest version. Let's take a look at one that
includes all available options:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">name</span><span class="token punctuation">:</span>
<span class="token key atrule">contentName</span><span class="token punctuation">:</span>
<span class="token key atrule">begin</span><span class="token punctuation">:</span>
<span class="token key atrule">beginCaptures</span><span class="token punctuation">:</span>
  <span class="token key atrule">'0'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token punctuation">}</span>
  <span class="token comment"># ...</span>
<span class="token key atrule">end</span><span class="token punctuation">:</span>
<span class="token key atrule">endCaptures</span><span class="token punctuation">:</span>
  <span class="token key atrule">'0'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token punctuation">}</span>
  <span class="token comment"># ...</span>
<span class="token key atrule">patterns</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span>
  <span class="token key atrule">match</span><span class="token punctuation">:</span>
<span class="token comment"># ...</span>
</code></pre></div><p>Some elements may look familiar, but their combination might be
daunting. Let's inspect them individually.</p> <dl><dt><code>name</code></dt> <dd>Just like with simple captures this sets the following scope name to
the whole match, including <code>begin</code> and <code>end</code> marks. Effectively,
this will create nested scopes for <code>beginCaptures</code>, <code>endCaptures</code>
and <code>patterns</code> defined within this rule. Optional.</dd> <dt><code>contentName</code></dt> <dd>Unlike the <code>name</code> this only applies a scope name to the enclosed
text. Optional.</dd> <dt><code>begin</code></dt> <dd>Regex for the opening mark for this scope.</dd> <dt><code>end</code></dt> <dd>Regex for the end mark for this scope.</dd> <dt><code>beginCaptures</code></dt> <dd>Captures for the <code>begin</code> marker. They work like captures for simple
matches. Optional.</dd> <dt><code>endCaptures</code></dt> <dd>Same as <code>beginCaptures</code> but for the <code>end</code> marker. Optional.</dd> <dt><code>patterns</code></dt> <dd>An array of patterns to match <strong>only</strong> against the begin-end's
content; they aren't matched against the text consumed by <code>begin</code> or
<code>end</code> themselves. Optional.</dd></dl> <p>We'll use this rule to style nested complex fields in snippets:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">name</span><span class="token punctuation">:</span> variable.complex.ssraw
<span class="token key atrule">contentName</span><span class="token punctuation">:</span> string.other.ssraw
<span class="token key atrule">begin</span><span class="token punctuation">:</span> <span class="token string">'(\$)(\{)([0-9]+):'</span>
<span class="token key atrule">beginCaptures</span><span class="token punctuation">:</span>
  <span class="token key atrule">'1'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">name</span><span class="token punctuation">:</span> keyword.other.ssraw<span class="token punctuation">}</span>
  <span class="token key atrule">'3'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">name</span><span class="token punctuation">:</span> constant.numeric.ssraw<span class="token punctuation">}</span>
<span class="token key atrule">end</span><span class="token punctuation">:</span> \<span class="token punctuation">}</span>
<span class="token key atrule">patterns</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> <span class="token key atrule">include</span><span class="token punctuation">:</span> $self
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> support.other.ssraw
  <span class="token key atrule">match</span><span class="token punctuation">:</span> .
</code></pre></div><p>This is the most complex pattern we'll see in this tutorial. The <code>begin</code> and
<code>end</code> keys are self-explanatory: they define a region enclosed between
<code>${&lt;NUMBER&gt;:</code> and <code>}</code>. We need to wrap the begin pattern into quotes because
otherwise the trailing <code>:</code> would tell the parser to expect another
dictionary key. <code>beginCaptures</code> further divides the begin mark into smaller
scopes.</p> <p>The most interesting part, however, is <code>patterns</code>. Recursion, and the
importance of ordering, have finally made their appearance here.</p> <p>We've seen above that fields can be nested. In order to account for this, we
need to style nested fields recursively. That's what the <code>include</code> rule does
when we furnish it the <code>$self</code> value: it recursively applies our <strong>entire
syntax definition</strong> to the text captured by our begin-end rule. This portion
excludes the text individually consumed by the regexes for <code>begin</code> and
<code>end</code>.</p> <p>Remember, matched text is consumed; thus, it is excluded from the next match
attempt and can't be matched again.</p> <p>To finish off complex fields, we'll style placeholders as strings. Since we've
already matched all possible tokens inside a complex field, we can safely tell
Sublime Text to give any remaining text (<code>.</code>) a literal string scope. Note
that this doesn't work if we made the pattern greedy (<code>.+</code>) because this
includes possible nested references.</p> <div class="custom-block tip"><p class="custom-block-title">Note</p> <p>We could've used <code>contentName: string.other.ssraw</code> instead of the last
pattern but this way we introduce the importance of ordering and how matches
are consumed.</p></div> <h3 id="final-touches"><a href="#final-touches" class="header-anchor">#</a> Final Touches</h3> <p>Lastly, let's style escape sequences and illegal sequences, and then we
can wrap up.</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token punctuation">-</span> <span class="token key atrule">comment</span><span class="token punctuation">:</span> Sequences like \$<span class="token punctuation">,</span> \<span class="token punctuation">&gt;</span> and \&lt;
  <span class="token key atrule">name</span><span class="token punctuation">:</span> constant.character.escape.ssraw
  <span class="token key atrule">match</span><span class="token punctuation">:</span> \\<span class="token punctuation">[</span>$&lt;<span class="token punctuation">&gt;</span><span class="token punctuation">]</span>

<span class="token punctuation">-</span> <span class="token key atrule">comment</span><span class="token punctuation">:</span> Unescaped and unmatched magic characters
  <span class="token key atrule">name</span><span class="token punctuation">:</span> invalid.illegal.ssraw
  <span class="token key atrule">match</span><span class="token punctuation">:</span> <span class="token string">'[$&lt;&gt;]'</span>
</code></pre></div><p>The only hard thing here is not forgetting that <code>[]</code> enclose arrays in
YAML and thus must be wrapped in quotes. Other than that, the rules are
pretty straightforward if you're familiar with regular expressions.</p> <p>However, you must take care to place the second rule after any others
matching the <code>$</code> character, since otherwise it will be consumed and
result in every following expression not matching.</p> <p>Also, even after adding these two additional rules, note that our
recursive begin-end rule from above continues to work as expected.</p> <p>At long last, here's the final syntax definition:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token comment"># [PackageDev] target_format: plist, ext: tmLanguage</span>
<span class="token punctuation">---</span>
<span class="token key atrule">name</span><span class="token punctuation">:</span> Sublime Snippet (Raw)
<span class="token key atrule">scopeName</span><span class="token punctuation">:</span> source.ssraw
<span class="token key atrule">fileTypes</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>ssraw<span class="token punctuation">]</span>
<span class="token key atrule">uuid</span><span class="token punctuation">:</span> 0da65be4<span class="token punctuation">-</span>5aac<span class="token punctuation">-</span>4b6f<span class="token punctuation">-</span>8071<span class="token punctuation">-</span>1aadb970b8d9

<span class="token key atrule">patterns</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> <span class="token key atrule">comment</span><span class="token punctuation">:</span> Tab stops like $1<span class="token punctuation">,</span> $2<span class="token punctuation">...</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> keyword.other.ssraw
  <span class="token key atrule">match</span><span class="token punctuation">:</span> \$(\d+)
  <span class="token key atrule">captures</span><span class="token punctuation">:</span>
    <span class="token key atrule">'1'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">name</span><span class="token punctuation">:</span> constant.numeric.ssraw<span class="token punctuation">}</span>

<span class="token punctuation">-</span> <span class="token key atrule">comment</span><span class="token punctuation">:</span> Variables like $PARAM1<span class="token punctuation">,</span> $TM_SELECTION<span class="token punctuation">...</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> keyword.other.ssraw
  <span class="token key atrule">match</span><span class="token punctuation">:</span> \$(<span class="token punctuation">[</span>A<span class="token punctuation">-</span>Za<span class="token punctuation">-</span>z<span class="token punctuation">]</span><span class="token punctuation">[</span>A<span class="token punctuation">-</span>Za<span class="token punctuation">-</span>z0<span class="token punctuation">-</span>9_<span class="token punctuation">]</span>+)
  <span class="token key atrule">captures</span><span class="token punctuation">:</span>
    <span class="token key atrule">'1'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">name</span><span class="token punctuation">:</span> constant.numeric.ssraw<span class="token punctuation">}</span>

<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> variable.complex.ssraw
  <span class="token key atrule">begin</span><span class="token punctuation">:</span> <span class="token string">'(\$)(\{)([0-9]+):'</span>
  <span class="token key atrule">beginCaptures</span><span class="token punctuation">:</span>
    <span class="token key atrule">'1'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">name</span><span class="token punctuation">:</span> keyword.other.ssraw<span class="token punctuation">}</span>
    <span class="token key atrule">'3'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">name</span><span class="token punctuation">:</span> constant.numeric.ssraw<span class="token punctuation">}</span>
  <span class="token key atrule">end</span><span class="token punctuation">:</span> \<span class="token punctuation">}</span>
  <span class="token key atrule">patterns</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">include</span><span class="token punctuation">:</span> $self
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> support.other.ssraw
    <span class="token key atrule">match</span><span class="token punctuation">:</span> .

<span class="token punctuation">-</span> <span class="token key atrule">comment</span><span class="token punctuation">:</span> Sequences like \$<span class="token punctuation">,</span> \<span class="token punctuation">&gt;</span> and \&lt;
  <span class="token key atrule">name</span><span class="token punctuation">:</span> constant.character.escape.ssraw
  <span class="token key atrule">match</span><span class="token punctuation">:</span> \\<span class="token punctuation">[</span>$&lt;<span class="token punctuation">&gt;</span><span class="token punctuation">]</span>

<span class="token punctuation">-</span> <span class="token key atrule">comment</span><span class="token punctuation">:</span> Unescaped and unmatched magic characters
  <span class="token key atrule">name</span><span class="token punctuation">:</span> invalid.illegal.ssraw
  <span class="token key atrule">match</span><span class="token punctuation">:</span> <span class="token string">'[$&lt;&gt;]'</span>
<span class="token punctuation">...</span>
</code></pre></div><p>There are more available constructs and code reuse techniques using a
&quot;repository&quot;, but the above explanations should get you started with the
creation of syntax definitions.</p> <div class="custom-block tip"><p class="custom-block-title">Note</p> <p>If you previously used JSON for syntax definitions you are still able to do
this because <a title="An installable package that provides syntax highlighting, snippets, completions, and more for Sublime Text's resource files.
" class="term">PackageDev</a> is backwards compatible.</p> <p>If you want to consider switching to YAML (either from JSON or directly from
Plist), it provides a command named <code>PackageDev: Convert to YAML and Rearrange Syntax Definition</code> which will automatically format the resulting
YAML in a pleasurable way.</p></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/sublimetext-io/docs.sublimetext.io/edit/master/docs/guide/extensibility/syntaxdefs.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">11/3/2022, 1:15:33 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/extensibility/snippets.html" class="prev">
        Snippets
      </a></span> <!----></p></div>  <div class="footer-wrapper" data-v-7b8cc140><span data-v-7b8cc140><a target="blank" href="https://github.com/danktuary/vuepress-theme-yuu" data-v-7b8cc140>Based on vuepress-theme-yuu</a></span> <span data-v-7b8cc140>
    Copyright:
    <a data-v-7b8cc140><span data-v-7b8cc140>2013 - </span>
      2022
    </a></span></div></main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.a3a88a9a.js" defer></script><script src="/assets/js/3.205f73e3.js" defer></script><script src="/assets/js/2.4410a5fb.js" defer></script><script src="/assets/js/32.f41b8da7.js" defer></script><script src="/assets/js/6.ebf4e6d0.js" defer></script>
  </body>
</html>
